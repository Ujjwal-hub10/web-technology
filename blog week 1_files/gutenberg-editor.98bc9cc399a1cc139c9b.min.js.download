"use strict";(globalThis.webpackChunkcalypso=globalThis.webpackChunkcalypso||[]).push([[80489],{"./blocks/app-banner/utils.js":(e,t,s)=>{s.d(t,{jc:()=>a,yv:()=>c,bx:()=>d,ct:()=>l,Nj:()=>p,Sd:()=>u,AK:()=>m,d7:()=>g,lt:()=>y,tW:()=>f,zE:()=>j});var o=s("../packages/calypso-config/src/index.ts"),i=s("../node_modules/lodash-es/includes.js"),r=s("../node_modules/lodash-es/reduce.js"),n=s("../node_modules/lodash-es/get.js");const a="appBannerDismissTimes",c="gutenberg-editor",d="notifications",l="reader",p="stats",u="home",m=[c,d,l,p,u],h={title:"",copy:"",icon:""};function g(e,t,s){const i=o.ZP.isEnabled("jetpack/app-branding");switch(t){case c:return{title:e("Rich mobile publishing."),copy:e("A streamlined editor with faster, simpler image uploading? Check and mate."),icon:`/calypso/animations/app-promo/wp-to-jp${s?"-rtl":""}.json`};case d:return{title:e("Watch engagement happening."),copy:e("Is your new post a hit? With push notifications, see reactions as they roll in."),icon:`/calypso/animations/app-promo/jp-notifications${s?"-rtl":""}.json`};case l:return{title:e("Read posts, even offline."),copy:e("Catch up with new posts on the go or save them to read offline."),icon:`/calypso/animations/app-promo/jp-reader${s?"-rtl":""}.json`};case p:return{title:e("Stats at your fingertips."),copy:e("See your real-time stats anytime, anywhere."),icon:`/calypso/animations/app-promo/jp-stats${s?"-rtl":""}.json`};case u:return i?{title:e("The Jetpack app makes WordPress better."),copy:e("Everything you need to write, publish, and manage a world-class site."),icon:`/calypso/animations/app-promo/wp-to-jp${s?"-rtl":""}.json`}:h;default:return h}}function y(e,t){return t?d:(0,i.Z)(m,e)?e:null}function f(e,t){const s=function(){const e=Date.now();return{longerDuration:e+12096e5,shorterDuration:e+864e5}}();return(0,r.Z)(m,((o,i)=>(o[i]=i===e?s.longerDuration:(0,n.Z)(t,i,-1/0)>s.shorterDuration?(0,n.Z)(t,i):s.shorterDuration,o)),{})}const j=(e,t)=>(0,n.Z)(e,t,-1/0)>Date.now()},"./components/data/query-post-types/index.jsx":(e,t,s)=>{s.d(t,{Z:()=>u});var o=s("../node_modules/prop-types/index.js"),i=s.n(o),r=s("../node_modules/react/index.js"),n=s("../node_modules/react-redux/es/index.js"),a=s("./state/post-types/actions.js"),c=s("./state/selectors/get-site-setting.js"),d=s("./state/sites/selectors/get-site-option.ts");const l=(e,t)=>s=>(0,c.Z)(s,e,t);function p({siteId:e}){const t=(0,n.I0)(),s=(0,n.v9)((t=>(0,d.Z)(t,e,"theme_slug"))),o=(0,n.v9)(l(e,"jetpack_testimonial")),i=(0,n.v9)(l(e,"jetpack_portfolio"));return(0,r.useEffect)((()=>{e&&t((0,a.r)(e))}),[t,e,s,o,i]),null}p.propTypes={siteId:i().number.isRequired};const u=p},"./components/domains/domain-upsell-callout/index.jsx":(e,t,s)=>{s.d(t,{Z:()=>j});var o=s("../packages/calypso-analytics/src/index.ts"),i=s("../packages/calypso-products/src/is-free-plan.ts"),r=s("../packages/components/src/gridicon/index.tsx"),n=s("../node_modules/@wordpress/react-i18n/build-module/index.js"),a=s("../node_modules/page/page.js"),c=s.n(a),d=s("../node_modules/react/index.js"),l=s("../node_modules/react-redux/es/index.js"),p=s("./lib/analytics/track-component-view/index.jsx"),u=s("./state/current-user/selectors.js"),m=s("./state/preferences/actions.js"),h=s("./state/preferences/selectors.js"),g=s("./state/sites/domains/selectors.js"),y=s("./state/ui/selectors/get-selected-site.ts"),f=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const j=({trackEvent:e})=>{const t=(0,l.I0)(),s=(0,l.v9)((e=>(0,y.Z)(e))),a=`calypso_${e}_view`,j=`calypso_${e}_click`,I=`calypso_${e}_dismiss`,w=`${e}-${s?.ID}`,b=(0,l.v9)((e=>(0,u.Y)(e))),Z=(0,l.v9)((e=>(0,g.eT)(e,s?.ID))),_=(0,l.v9)(h.V2),v=(0,l.v9)((e=>(0,h.Oz)(e,w))),{__:P}=(0,n.QT)(),k=(0,d.useCallback)((()=>{(0,o.jN)(j),c()(`/domains/add/${s?.domain}?domainAndPlanPackage=true`)}),[j,s?.domain]);return!s||!_||v||Z.length>1||!b||!(0,i.V)(s.plan)?null:(0,f.BX)(f.HY,{children:[(0,f.tZ)(p.Z,{eventName:a}),(0,f.tZ)("div",{className:"domain-upsell-callout",children:(0,f.tZ)("div",{className:"domain-upsell-callout__content",children:(0,f.BX)("div",{className:"domain-upsell-callout__content-text",children:[(0,f.tZ)(r.Z,{icon:"globe",size:16,className:"domain-upsell-callout__icon"}),(0,f.tZ)("span",{className:"domain-upsell-callout__domain-name",children:s.domain}),(0,f.BX)("button",{className:"domain-upsell-callout__button",onClick:k,children:[(0,f.tZ)("span",{className:"domain-upsell-callout__button-text-desktop",children:P("Customize your domain")}),(0,f.tZ)("span",{className:"domain-upsell-callout__button-text-mobile",children:P("Customize")})]}),(0,f.tZ)(r.Z,{icon:"cross",size:16,className:"domain-upsell-callout__dismiss-icon",onClick:()=>{(0,o.jN)(I),t((0,m.zZ)(w,1))}})]})})})]})}},"./data/block-editor/with-block-editor-settings.js":(e,t,s)=>{s.d(t,{Z:()=>p});var o=s("../node_modules/@wordpress/compose/build-module/utils/create-higher-order-component/index.js"),i=s("../node_modules/react-redux/es/index.js"),r=s("./state/current-user/selectors.js"),n=s("./state/ui/selectors/get-selected-site-id.js"),a=s("../node_modules/react-query/es/index.js"),c=s("./lib/wp/browser.js"),d=s("./state/themes/selectors/get-active-theme.js");var l=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const p=(0,o.o)((e=>t=>{const s=(0,i.v9)(n.Z),o=(0,i.v9)(r.Pc),{data:p,isLoading:u}=((e,t=!1)=>{const s=(0,i.v9)((t=>(0,d.z)(t,e))),o=["blockEditorSettings",e,s];return(0,a.useQuery)(o,(()=>c.Z.req.get({path:`/sites/${e}/block-editor`,apiNamespace:"wpcom/v2"})),{enabled:t&&!!e})})(s,o);return(0,l.tZ)(e,{...t,blockEditorSettings:p,areBlockEditorSettingsLoading:u})}),"withBlockEditorSettings")},"./gutenberg/editor/index.js":(e,t,s)=>{s.r(t),s.d(t,{default:()=>Ke});var o=s("../node_modules/page/page.js"),i=s.n(o),r=s("./controller/index.web.js"),n=s("./my-sites/controller.js"),a=s("../packages/calypso-config/src/index.ts"),c=s("./lib/url/add-query-args.ts"),d=s("./state/action-types.ts"),l=s("./state/admin-menu/actions/index.js"),p=s("./state/admin-menu/selectors/index.js"),u=s("./state/editor/actions.js"),m=s("./state/selected-editor/actions.js"),h=s("./state/selectors/get-editor-url.js"),g=s("./state/selectors/get-selected-editor.js"),y=s("./state/selectors/get-site-editor-url.js"),f=s("./state/selectors/is-site-automated-transfer.ts"),j=s("./state/selectors/should-load-gutenframe.js"),I=s("./state/sites/actions.js"),w=s("./state/sites/selectors/get-site-option.ts"),b=s("./state/sites/selectors/is-jetpack-site.ts"),Z=s("./state/selectors/get-raw-site.ts");function _(e,t){const s=(0,Z.Z)(e,t);return s?s?.options?.active_modules?.includes("sso"):null}var v=s("./state/sites/selectors/get-site-admin-url.js"),P=s("./state/ui/selectors/get-selected-site-id.js"),k=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),x=s("../node_modules/@wordpress/url/build-module/get-query-arg.js"),T=s("../packages/i18n-calypso/src/localize.js"),S=s("../node_modules/lodash-es/map.js"),R=s("../node_modules/lodash-es/pickBy.js"),E=s("../node_modules/lodash-es/flowRight.js"),C=s("../node_modules/react/index.js"),M=s("../node_modules/react-redux/es/index.js"),q=s("./components/async-load/index.jsx"),B=s("./components/domains/domain-upsell-callout/index.jsx"),$=s("./data/block-editor/with-block-editor-settings.js"),L=s("./lib/analytics/hotjar.js"),N=s("./lib/analytics/page-view-tracker/index.jsx"),O=s("./lib/memoize-last/index.ts"),D=s("./lib/navigate/index.ts"),U=s("./lib/performance-tracking/index.web.ts"),A=s("./lib/protect-form/index.tsx"),G=s("./lib/wp/browser.js"),F=s("./components/data/document-head/index.jsx"),z=s("./components/data/query-post-types/index.jsx"),V=s("./state/editor/selectors.js"),W=s("./state/post-types/selectors.js"),X=s("./state/posts/selectors/get-edited-post-value.js"),H=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const Q=(0,M.$j)((e=>{const t=(0,P.Z)(e),s=(0,V.BN)(e),o=(0,X.r)(e,t,s,"type");return{siteId:t,type:o,typeObject:(0,W.z_)(e,t,o),newPost:(0,V.To)(e)}}))((0,T.Z)((function({translate:e,siteId:t,type:s,typeObject:o,newPost:i}){let r;return r="post"===s?e(i?"New Post":"Edit Post",{textOnly:!0}):"page"===s?e(i?"New Page":"Edit Page",{textOnly:!0}):i?o?o.labels.new_item:e("New",{textOnly:!0}):o?o.labels.edit_item:e("Edit",{context:"verb",textOnly:!0}),(0,H.BX)("div",{children:[t&&"page"!==s&&"post"!==s&&(0,H.tZ)(z.Z,{siteId:t}),(0,H.tZ)(F.Z,{title:r})]})})));var Y=s("./state/current-user/selectors.js"),K=s("./state/media/actions.js"),J=s("../node_modules/debug/src/browser.js");const ee=s.n(J)()("calypso:media");var te=s("./state/media/thunks/get-media-item.js"),se=s("./state/posts/actions/edit-post.js"),oe=s("./state/posts/actions/trash-post.js"),ie=s("./state/posts/revisions/actions.js"),re=s("./state/route/actions.js"),ne=s("./state/selectors/get-current-route.js"),ae=s("../packages/i18n-calypso/src/index.js");const ce=e=>e?.route?.lastNonEditorRoute||"";var de=s("../node_modules/lodash-es/get.js"),le=s("./state/sites/selectors/get-site-slug.js"),pe=s("./state/sites/selectors/is-single-user-site.js");const ue=(e,t)=>{const s=(0,P.Z)(e),o=(0,le.Z)(e,s),i=(0,b.Z)(e,s),r=(0,pe.Z)(e,s),n=(0,de.Z)({page:"pages",post:"posts"},t,`types/${t}`);return"post"!==t||i||r?`/${n}/${o}`:`/${n}/my/${o}`};const me=(e,t)=>{const s=(0,P.Z)(e),o=(0,le.Z)(e,s),i=(0,b.Z)(e,s),r=(0,pe.Z)(e,s),n=(0,de.Z)({page:"pages",post:"posts"},t,`types/${t}`);return"post"!==t||i||r?`/${n}/trashed/${o}`:`/${n}/my/trashed/${o}`};var he=s("./state/selectors/get-site-url.js"),ge=s("./state/selectors/is-site-wpforteams.js"),ye=s("./state/selectors/is-unlaunched-site.js"),fe=s("./state/selectors/is-user-registration-days-within-range.js"),je=s("./state/selectors/should-display-app-banner.ts"),Ie=s("./state/sites/selectors/is-requesting-site.js"),we=s("./state/sites/selectors/get-customizer-url.js"),be=s("./state/sites/selectors/get-site.js"),Ze=s("./state/ui/selectors/get-selected-site-slug.js");s("./state/ui/init.js");function _e(e){return e.ui.appBannerDismissed}const ve=(0,C.forwardRef)((function(e,t){return(0,C.useEffect)((()=>{window.performance?.mark?.("iframe_rendered")}),[e.src]),(0,H.tZ)("iframe",{...e,ref:t})}));var Pe=s("../node_modules/@wordpress/blocks/build-module/index.js"),ke=s("../node_modules/lodash-es/reduce.js"),xe=s("../node_modules/lodash-es/includes.js");const Te=[],Se=["google_photos","openverse","pexels"],Re=e=>!e||Array.isArray(e)&&!e.length||(0,xe.Z)(e,"image")?Te:Se,Ee={image:"images",audio:"audio",video:"videos"},Ce=e=>Array.isArray(e)&&e.length?e.map((e=>Ee[e])):void 0,Me=()=>(0,H.tZ)("div",{className:"editor__placeholder",children:(0,H.BX)("div",{className:"edit-post-layout",children:[(0,H.BX)("div",{className:"edit-post-header",children:[(0,H.tZ)("div",{className:"edit-post-header-toolbar",children:(0,H.tZ)("div",{className:"placeholder placeholder-site",children:"Placeholder"})}),(0,H.BX)("div",{className:"edit-post-header__settings",children:[(0,H.tZ)("div",{className:"placeholder placeholder-button",children:"Placeholder"}),(0,H.tZ)("div",{className:"placeholder placeholder-button",children:"Placeholder"}),(0,H.tZ)("div",{className:"placeholder placeholder-button",children:"Placeholder"})]})]}),(0,H.tZ)("div",{className:"edit-post-layout__content",children:(0,H.tZ)("div",{className:"edit-post-visual-editor editor-styles-wrapper",children:(0,H.tZ)("div",{className:"editor-writing-flow",children:(0,H.tZ)("div",{className:"editor-post-title",children:(0,H.tZ)("div",{className:"placeholder placeholder-title wp-block editor-post-title__block",children:"Placeholder"})})})})})]})});var qe,Be;!function(e){e.Loaded="loaded",e.ClassicBlockOpenMediaModel="classicBlockOpenMediaModal"}(qe||(qe={})),function(e){e.GoToAllPosts="goToAllPosts",e.CloseEditor="closeEditor",e.OpenMediaModal="openMediaModal",e.OpenCheckoutModal="openCheckoutModal",e.GetCheckoutModalStatus="getCheckoutModalStatus",e.OpenRevisions="openRevisions",e.PostStatusChange="postStatusChange",e.OpenLinkInParentFrame="openLinkInParentFrame",e.ViewPost="viewPost",e.SetDraftId="draftIdSet",e.TrashPost="trashPost",e.OpenCustomizer="openCustomizer",e.GetCloseButtonUrl="getCloseButtonUrl",e.GetGutenboardingStatus="getGutenboardingStatus",e.ToggleInlineHelpButton="toggleInlineHelpButton",e.GetNavSidebarLabels="getNavSidebarLabels",e.GetCalypsoUrlInfo="getCalypsoUrlInfo",e.TrackPerformance="trackPerformance",e.GetIsAppBannerVisible="getIsAppBannerVisible",e.NavigateToHome="navigateToHome"}(Be||(Be={}));var $e=function(e){Promise.all([s.e(22434),s.e(28113),s.e(14059),s.e(58112),s.e(26909),s.e(42160),s.e(18891),s.e(31562),s.e(50842),s.e(57571),s.e(14953),s.e(37803),s.e(86568),s.e(73319),s.e(24910),s.e(5443),s.e(30074),s.e(74784),s.e(43626),s.e(87958),s.e(22702)]).then(s.bind(s,"./post-editor/editor-media-modal/index.jsx")).then((function(t){e(t.default)}))},Le=function(e){Promise.all([s.e(43400),s.e(53527),s.e(82430),s.e(84760),s.e(19299),s.e(43151),s.e(24619),s.e(35330),s.e(52203),s.e(11876),s.e(56532),s.e(61604),s.e(16446),s.e(83228),s.e(12952),s.e(93688),s.e(97810),s.e(63153),s.e(58456),s.e(77315),s.e(34220),s.e(13453),s.e(94615)]).then(s.bind(s,"./blocks/editor-checkout-modal/index.tsx")).then((function(t){e(t.default)}))},Ne=function(e){Promise.all([s.e(22434),s.e(78845)]).then(s.bind(s,"./post-editor/editor-revisions/dialog.jsx")).then((function(t){e(t.default)}))};class Oe extends C.Component{constructor(...e){super(...e),(0,k.Z)(this,"state",{isMediaModalVisible:!1,isCheckoutModalVisible:!1,isIframeLoaded:!1,currentIFrameUrl:"",checkoutModalOptions:void 0}),(0,k.Z)(this,"iframeRef",C.createRef()),(0,k.Z)(this,"iframePort",null),(0,k.Z)(this,"mediaSelectPort",null),(0,k.Z)(this,"mediaCancelPort",null),(0,k.Z)(this,"revisionsPort",null),(0,k.Z)(this,"checkoutPort",null),(0,k.Z)(this,"appBannerPort",null),(0,k.Z)(this,"editorRedirectTimer",void 0),(0,k.Z)(this,"setEditorRedirectTimer",(e=>{this.editorRedirectTimer&&clearTimeout(this.editorRedirectTimer),this.editorRedirectTimer=setTimeout(this.tryRedirect,e)})),(0,k.Z)(this,"disableRedirects",!1),(0,k.Z)(this,"tryRedirect",(()=>{this.disableRedirects||window.location.replace(this.props.iframeUrl)})),(0,k.Z)(this,"onMessage",(({data:e,origin:t})=>{if(!e||"gutenbergIframeMessage"!==e.type)return;if(!(this.props.siteAdminUrl&&0===this.props.siteAdminUrl.indexOf(t)))return;const{action:s}=e;if(qe.Loaded===s&&this.iframeRef.current&&this.iframeRef.current.contentWindow){this.disableRedirects=!0,this.editorRedirectTimer&&clearTimeout(this.editorRedirectTimer);const{port1:e,port2:t}=new window.MessageChannel;return this.iframePort=e,this.iframePort.addEventListener("message",this.onIframePortMessage,!1),this.iframePort.start(),this.iframeRef.current.contentWindow.postMessage({action:"initPort"},"*",[t]),this.props.setEditorIframeLoaded(!0,this.iframePort),window.performance?.mark?.("iframe_loaded"),void this.setState({isIframeLoaded:!0,currentIFrameUrl:this.props.iframeUrl})}if(qe.ClassicBlockOpenMediaModel===s){if(e.imageId){const{siteId:t}=this.props;this.props.selectMediaItems(t,[{ID:e.imageId}])}this.setState({classicBlockEditorId:e.editorId,isMediaModalVisible:!0,multiple:!0})}})),(0,k.Z)(this,"onIframePortMessage",(e=>{const{data:t,ports:s}=e,o=t.ports??s,{action:r,payload:n}=t;if(Be.OpenMediaModal===r&&o&&o[0]){const{siteId:e}=this.props,{allowedTypes:t,multiple:s,value:i}=n;if(this.mediaSelectPort=o[0],this.mediaCancelPort=o[1],i){const t=(Array.isArray(i)?i.map((e=>parseInt(e,10))):[parseInt(i,10)]).map((t=>{const s=this.props.getMediaItem(e,t);return s||this.props.fetchMediaItem(e,t),{ID:t,...s}}));this.props.selectMediaItems(e,t)}else this.props.selectMediaItems(e,[]);this.setState({isMediaModalVisible:!0,allowedTypes:t,multiple:s})}if(Be.OpenCheckoutModal===r&&(this.checkoutPort=o[0],this.setState({isCheckoutModalVisible:!0,checkoutModalOptions:n})),Be.GetCheckoutModalStatus===r){const e=a.ZP.isEnabled("post-editor/checkout-overlay");o[0].postMessage({isCheckoutOverlayEnabled:e})}if(Be.SetDraftId===r&&!this.props.postId){const{postId:e}=n,{siteId:t,currentRoute:s,postType:o}=this.props;s.endsWith(`/${e}`)||(i().replace(`${s}/${e}`,null,!1,!1),this.props.setRoute(`${s}/${e}`),this.props.startEditingPost(t,e),this.props.editPost(t,e,{type:o}))}if(Be.TrashPost===r){const{siteId:e,editedPostId:t,postTypeTrashUrl:s}=this.props;this.props.trashPost(e,t),(0,D.c)(s)}if(Be.CloseEditor===r||Be.GoToAllPosts===r){const{unsavedChanges:e=!1,destinationUrl:t=this.props.closeUrl}=n;this.props.setEditorIframeLoaded(!1),this.navigate(t,e)}if(Be.OpenRevisions===r&&(o&&o[0]&&(this.revisionsPort=o[0]),this.props.openPostRevisionsDialog()),Be.ViewPost===r){const{postUrl:e}=n;window.open(e,"_top")}if(Be.OpenLinkInParentFrame===r){const{postUrl:e}=n;window.open(e,"_top")}if(Be.OpenCustomizer===r){const{autofocus:e=null,unsavedChanges:t=!1}=n;this.openCustomizer(e,t)}if(Be.GetCloseButtonUrl===r){const{closeUrl:e,closeLabel:t}=this.props;o[0].postMessage({closeUrl:`${window.location.origin}${e}`,label:t})}if(Be.GetGutenboardingStatus===r){const e="gutenboarding"===this.props.siteCreationFlow,t=window.location.href;o[0].postMessage({isGutenboarding:e,currentCalypsoUrl:t})}if(Be.ToggleInlineHelpButton===r){const e=window?.top?.document.querySelector("#wpcom > .layout > .inline-help");e&&(e.hidden=n.hidden)}if(Be.GetNavSidebarLabels===r){const{translate:e}=this.props;o[0].postMessage({allPostsLabels:{page:e("View all pages"),post:e("View all posts")},createPostLabels:{page:e("Add new page"),post:e("Add new post")},listHeadings:{page:e("Recent Pages"),post:e("Recent Posts")}})}if(Be.GetCalypsoUrlInfo===r&&o[0].postMessage({origin:window.location.origin,siteSlug:this.props.siteSlug}),Be.PostStatusChange===r){const{status:e}=n;this.handlePostStatusChange(e)}if(Be.TrackPerformance===r&&"editor.ready"===n.mark&&this.props.stopPerformanceTracking({isNew:n.isNew,blockCount:n.blockCount}),Be.GetIsAppBannerVisible===r){const e=this.props.shouldDisplayAppBanner;o[0].postMessage({isAppBannerVisible:e,hasAppBannerBeenDismissed:!1}),e&&(this.appBannerPort=o[0])}Be.NavigateToHome===r&&i()(`/home/${this.props.siteSlug}`)})),(0,k.Z)(this,"handlePostStatusChange",(e=>{const{creatingNewHomepage:t,editedPostId:s,isSiteWPForTeams:o,siteUrl:i}=this.props;t&&"publish"===e&&this.setFrontPage(),o&&s&&i&&"publish"===e&&top&&(top.location.href=(0,c.Z)({p:s},i))})),(0,k.Z)(this,"setFrontPage",(()=>{const{editedPostId:e,siteId:t}=this.props;this.props.updateSiteFrontPage(t,{show_on_front:"page",page_on_front:e})})),(0,k.Z)(this,"loadRevision",(({post_title:e,post_excerpt:t,post_content:s})=>{this.iframePort&&(this.revisionsPort?(this.revisionsPort.postMessage({title:e,excerpt:t,content:s}),this.revisionsPort.close(),this.revisionsPort=null):this.iframePort.postMessage({action:"loadRevision",payload:{title:e,excerpt:t,content:s}}))})),(0,k.Z)(this,"closeMediaModal",(e=>{if(!this.state.classicBlockEditorId&&e&&this.mediaSelectPort){const{multiple:t}=this.state,s=(0,S.Z)(e.items,(e=>(e=>{const t={id:(0,de.Z)(e,"ID"),url:(0,de.Z)(e,"URL"),alt:(0,de.Z)(e,"alt"),caption:e.caption?(0,Pe.eP)(e.caption,{source:"children"}):"",description:(0,de.Z)(e,"description"),filename:(0,de.Z)(e,"file"),height:(0,de.Z)(e,"height"),icon:(0,de.Z)(e,"icon"),mime:(0,de.Z)(e,"mime_type"),sizes:{full:{url:(0,de.Z)(e,"URL")},...(0,ke.Z)(e.thumbnails,((e,t,s)=>(e[s]={url:t},e)),{})},title:(0,de.Z)(e,"title"),type:(0,de.Z)(e,"mime_type","").split("/")[0],width:(0,de.Z)(e,"width")};return e.videopress_guid&&(t.allow_download=e.allow_download,t.rating=e.rating,t.videopress_guid=e.videopress_guid),t})(e))),o=t?s:s[0];this.mediaSelectPort.postMessage(o),this.mediaSelectPort.close(),this.mediaSelectPort=null}this.state.classicBlockEditorId||e||!this.mediaCancelPort||(this.mediaCancelPort.postMessage(!0),this.mediaCancelPort.close(),this.mediaCancelPort=null),this.setState({classicBlockEditorId:null,isMediaModalVisible:!1})})),(0,k.Z)(this,"insertClassicBlockMedia",(e=>{this.state.classicBlockEditorId&&this.iframePort&&this.iframePort.postMessage({action:"insertClassicBlockMedia",payload:{editorId:this.state.classicBlockEditorId,media:e}})})),(0,k.Z)(this,"closeCheckoutModal",(()=>{this.setState({isCheckoutModalVisible:!1})})),(0,k.Z)(this,"openCustomizer",((e,t)=>{let{customizerUrl:s}=this.props;if(e){const[t,o]=Object.entries(e)[0];s=(0,c.Z)({[`autofocus[${t}]`]:o},s)}this.navigate(s,t)})),(0,k.Z)(this,"navigate",((e,t)=>{const{markChanged:s,markSaved:o}=this.props;t?s():o(),(0,D.c)(e)})),(0,k.Z)(this,"getStatsPath",(()=>{const{postId:e}=this.props;return e?"/:post_type/:site/:post_id":"/:post_type/:site"})),(0,k.Z)(this,"getStatsProps",(()=>{const{postId:e,postType:t}=this.props;return this.getStatsPropertiesForProps(e,t)})),(0,k.Z)(this,"getStatsPropertiesForProps",(0,O.Z)(((e,t)=>e?{post_type:t,post_id:e}:{post_type:t}))),(0,k.Z)(this,"getStatsTitle",(()=>{const{postId:e,postType:t}=this.props;let s;switch(t){case"post":s="Post";break;case"page":s="Page";break;default:s="Custom Post Type"}return e?`Block Editor > ${s} > Edit`:`Block Editor > ${s} > New`})),(0,k.Z)(this,"handleCheckoutSuccess",(()=>{this.checkoutPort&&(this.checkoutPort.postMessage("checkout complete"),this.checkoutPort.close(),this.checkoutPort=null,this.setState({isCheckoutModalVisible:!1}))})),(0,k.Z)(this,"handleAppBannerDismiss",(()=>{this.appBannerPort&&(this.appBannerPort.postMessage({isAppBannerVisible:!1,hasAppBannerBeenDismissed:!0}),this.appBannerPort.close(),this.appBannerPort=null)}))}componentDidMount(){window.addEventListener("message",this.onMessage,!1),this.props.shouldLoadIframe&&!this.editorRedirectTimer&&this.setEditorRedirectTimer(25e3),window.sessionStorage.getItem("a8c-clearLastNonEditorRoute")&&(window.sessionStorage.removeItem("a8c-clearLastNonEditorRoute"),this.props.clearLastNonEditorRoute())}componentDidUpdate({shouldLoadIframe:e}){this.editorRedirectTimer||e||!this.props.shouldLoadIframe||this.setEditorRedirectTimer(25e3),this.props.appBannerDismissed&&this.handleAppBannerDismiss()}componentWillUnmount(){this.editorRedirectTimer&&clearTimeout(this.editorRedirectTimer),window.removeEventListener("message",this.onMessage,!1)}render(){const{iframeUrl:e,shouldLoadIframe:t,isNew7DUser:s,currentUserCountryCode:o}=this.props,{classicBlockEditorId:i,isMediaModalVisible:r,isCheckoutModalVisible:n,allowedTypes:c,multiple:d,isIframeLoaded:l,currentIFrameUrl:p,checkoutModalOptions:u}=this.state,m=!!i,h=a.ZP.isEnabled("post-editor/checkout-overlay"),{redirectTo:g,isFocusedLaunch:y,...f}=u||{};return s||"IN"!==o||((0,L.o)(),window&&window.hj&&window.hj("trigger","in_survey_1")),(0,H.BX)(C.Fragment,{children:[(0,H.tZ)(N.Z,{path:this.getStatsPath(),title:this.getStatsTitle(),properties:this.getStatsProps()}),(0,H.tZ)(Q,{}),(0,H.BX)("div",{className:"main main-column calypsoify is-iframe",role:"main",children:[!l&&(0,H.tZ)(Me,{}),l&&"site"!==this.props.editorType&&(0,H.tZ)(B.Z,{trackEvent:"site_editor_domain_upsell_callout"}),(t||l)&&(0,H.tZ)(ve,{className:l?"is-loaded":"",ref:this.iframeRef,src:l?p:e,onLoad:()=>this.setEditorRedirectTimer(2e3),style:l?void 0:{opacity:0}})]}),(0,H.tZ)(q.Z,{require:$e,placeholder:null,disabledDataSources:Re(c),enabledFilters:Ce(c),galleryViewEnabled:m,isGutenberg:!m,onClose:this.closeMediaModal,onInsertMedia:this.insertClassicBlockMedia,single:!d,source:"",visible:r}),h&&(0,H.tZ)(q.Z,{checkoutOnSuccessCallback:this.handleCheckoutSuccess,require:Le,onClose:this.closeCheckoutModal,placeholder:null,isOpen:n,cartData:f,redirectTo:g,isFocusedLaunch:y}),(0,H.tZ)(q.Z,{require:Ne,placeholder:null,loadRevision:this.loadRevision})]})}}const De={setRoute:re.p,openPostRevisionsDialog:ie.VH,setEditorIframeLoaded:u.jP,startEditingPost:u.jZ,editPost:se.d,trashPost:oe.W,updateSiteFrontPage:I.p$,selectMediaItems:K.Un,fetchMediaItem:(e,t)=>s=>{ee("Fetching media for %d using ID %d",e,t),s((0,K.lh)(e,t))},getMediaItem:te.Z,clearLastNonEditorRoute:re.Y},Ue=(0,E.Z)(U.ZW,$.Z,(0,M.$j)(((e,{postId:t,postType:s,duplicatePostId:o,parentPostId:i,creatingNewHomepage:r,editorType:n="post",stripeConnectSuccess:d,anchorFmData:l,showDraftPostModal:p,pressThisData:u,blockEditorSettings:m,completedFlow:h})=>{const y=(0,P.Z)(e),f=(0,Ze.Z)(e),j=(0,ne.Z)(e),I=me(e,s),Z=(0,b.Z)(e,y)?"jetpack_frame_nonce":"frame_nonce";let _=(0,R.Z)({post:t,action:t&&"edit",post_type:"post"!==s&&s,calypsoify:1,parent_post:null!=i&&i,"block-editor":1,"frame-nonce":(0,w.Z)(e,y,Z)||"","jetpack-copy":o,origin:window.location.origin,"environment-id":(0,a.ZP)("env_id"),"new-homepage":r,...!!d&&{stripe_connect_success:d},...l,openSidebar:(0,x.I)(window.location.href,"openSidebar"),showDraftPostModal:p,...u,answer_prompt:(0,x.I)(window.location.href,"answer_prompt"),completedFlow:h,canvas:(0,x.I)(window.location.href,"canvas")});if(G.Z.addSupportParams&&(_=G.Z.addSupportParams(_)),"classic"===(0,g.E)(e,y??0)&&(_["in-editor-deprecation-group"]=1),"site"===n&&m?.home_template?.postType){const e=(0,x.I)(window.location.href,"templateType"),t=(0,x.I)(window.location.href,"templateId");e&&t?(_.postType=e,_.postId=t):m?.home_template?.postType&&(_.postType=m.home_template.postType,_.postId=m.home_template.postId)}const k=/[&?]notice=([\w_-]+)/.exec(document.location.search),T=k&&k[1];T&&(_.notice=T);const S="site"===n?(0,v.Z)(e,y,"site-editor.php"):(0,v.Z)(e,y,t?"post.php":"post-new.php"),E=(0,c.Z)(_,S??""),C=!(0,Ie.Z)(e,y??0),{url:M,label:q}=function(e,t,s){const o=ce(e),i=e=>o.match(e),r=e?.ui?.selectedSiteId,n=e?.sites?.items[r];if("full"===n?.options?.launchpad_screen){const t=(0,le.Z)(e,r),s=n?.options?.site_intent;return{url:`/setup/${s}/launchpad?siteSlug=${t}`,label:(0,ae.Iu)("Next steps")}}if(i(/^\/themes\/?/))return{url:`/themes/${(0,le.Z)(e,t)}`,label:(0,ae.Iu)("Themes")};if(!o||!s||i(/^\/home\/?/))return{url:`/home/${(0,le.Z)(e,t)}`,label:(0,ae.Iu)("Dashboard")};let a=(0,ae.Iu)("Back");return"post"===s?a=(0,ae.Iu)("View Posts"):"page"===s&&(a=(0,ae.Iu)("View Pages")),{url:ue(e,s),label:a}}(e,y,s),B=(0,je.Z)(e)&&!p;return{closeUrl:M,closeLabel:q,currentRoute:j,currentUserCountryCode:(0,Y.Yv)(e),editedPostId:(0,V.BN)(e),frameNonce:(0,w.Z)(e,y,"frame_nonce")||"",iframeUrl:E,isSiteWPForTeams:(0,ge.Z)(e,y??0),postTypeTrashUrl:I,shouldLoadIframe:C,siteAdminUrl:S,siteId:y,siteSlug:f,siteUrl:(0,he.Z)(e,y??0),customizerUrl:(0,we.Z)(e,y),unmappedSiteUrl:(0,w.Z)(e,y,"unmapped_url"),siteCreationFlow:(0,w.Z)(e,y,"site_creation_flow"),isSiteUnlaunched:(0,ye.Z)(e,y),site:(0,be.Z)(e,y??0),parentPostId:i,shouldDisplayAppBanner:B,appBannerDismissed:_e(e),isNew7DUser:(0,fe.Z)(e,null,0,7)}}),De),T.Z,A.TW)(Oe),Ae=()=>{};function Ge(e){return e.path.startsWith("/post/")?"post":e.path.startsWith("/page/")?"page":e.params.customPostType}function Fe(e){if(!e.params.post||"new"===e.params.post)return null;if("home"===e.params.post){const t=e.store.getState(),s=(0,P.Z)(t);return parseInt((0,w.Z)(t,s,"page_on_front"),10)}return parseInt(e.params.post,10)}function ze(e){const t=(0,P.Z)(e);return!(!t||(0,p.a)(e))&&null!==(0,p.Z)(e,t)}const Ve=(e,t)=>{const s=e.store.getState(),o=(0,P.Z)(s),i=(0,b.Z)(s,o),n=(0,a._k)("desktop"),d=`gutenframe_${o}_is_authenticated`;let l=globalThis.sessionStorage.getItem(d)||!i||i&&_(s,o)||n||e.query.authWpAdmin;if(n&&i&&!_(s,o)&&(l=!1),l)return e.store.dispatch((0,I.LV)(o)),globalThis.sessionStorage.setItem(d,"true"),t();e.primary=(0,H.tZ)(Me,{}),(0,r.wx)(e,Ae),(0,r.sY)(e);const p=window.location.origin,u=(0,c.Z)({...e.query,authWpAdmin:!0},`${p}${e.path}`),m=(0,v.Z)(s,o),h=(0,c.Z)({redirect_to:u},`${m}../wp-login.php`);window.location.replace(h)},We=async(e,t)=>{const{store:{getState:s}}=e,o=s(),i=[];(0,g.E)(o,(0,P.Z)(o))||i.push(function(e){return new Promise((t=>{const s=e.store.subscribe((()=>{const o=e.store.getState(),i=(0,P.Z)(o);i&&(0,g.E)(o,i)&&(s(),t())}));e.store.dispatch((0,m.o)((0,P.Z)(e.store.getState())))}))}(e)),ze(o)||i.push(function(e){return new Promise((t=>{const s=e.store.subscribe((()=>{ze(e.store.getState())&&(s(),t())}));e.store.dispatch((0,l.u)((0,P.Z)(e.store.getState())))}))}(e)),await Promise.all(i);const r=s(),n=(0,P.Z)(r),a=e.query.is_post_share;if(a&&"true"===a&&!(0,f.Z)(r,n))return t();const d=Ge(e);if(!(0,j.Z)(r,n,d)){const t=Fe(e),s=d?(0,h.Z)(r,n,t,d):(0,y.Z)(r,n);return window.location.replace((0,c.Z)(e.query,s))}return t()};function Xe(e){const t=window.sessionStorage.getItem(e);return window.sessionStorage.removeItem(e),t}const He=(e,t)=>{const s=Fe(e),o=Ge(e),i=parseInt(e.query["jetpack-copy"]),r=Number.isInteger(i)?i:null,n=e.store.getState(),a=(0,P.Z)(n),c=function(e){const{text:t,url:s,title:o,image:i,embed:r}=e;return s?{text:t,url:s,title:o,image:i,embed:r}:null}(e.query),l=function(e){const{anchor_podcast:t,anchor_episode:s,spotify_url:o}=e;return{anchor_podcast:t,anchor_episode:s,spotify_url:o}}(e.query),p=parseInt(e.query.parent_post,10)||null;return e.store.dispatch({type:d.gQI,siteId:a,postId:s}),e.store.dispatch({type:d.oD3,post:{type:o},siteId:a,postId:s}),e.primary=(0,H.tZ)(Ue,{postId:s,postType:o,duplicatePostId:r,pressThisData:c,anchorFmData:l,parentPostId:p,creatingNewHomepage:"page"===o&&e.query.hasOwnProperty("new-homepage"),stripeConnectSuccess:e.query.stripe_connect_success??null,showDraftPostModal:Xe("wpcom_signup_complete_show_draft_post_modal")},s),t()},Qe=(e,t)=>{const s=e.store.getState(),o=(0,P.Z)(s);return e.primary=(0,H.tZ)(Ue,{editorType:"site",completedFlow:Xe("wpcom_signup_completed_flow")},o),t()},Ye=(e,t)=>{const s=Fe(e),o=(0,P.Z)(e.store.getState());o&&e.store.dispatch((0,u.nF)(o,s)),t()};function Ke(){i()("/site-editor/:site?",n.tq,We,Ve,Qe,r.wx,r.sY),i()("/post",n.tq,n.tc,r.wx,r.sY),i()("/post/new","/post"),i()("/post/:site/:post?",n.tq,We,Ve,He,r.wx,r.sY),i().exit("/post/:site?/:post?",Ye),i()("/post/:site?",n.tq,We,r.wx,r.sY),i()("/page",n.tq,n.tc,r.wx,r.sY),i()("/page/new","/page"),i()("/page/:site/:post?",n.tq,We,Ve,He,r.wx,r.sY),i().exit("/page/:site?/:post?",Ye),i()("/page/:site?",n.tq,We,r.wx,r.sY),i()("/edit/:customPostType",n.tq,n.tc,r.wx,r.sY),i()("/edit/:customPostType/:site/:post?",n.tq,We,Ve,He,r.wx,r.sY),i()("/edit/:customPostType/:site?",n.tq,We,r.wx,r.sY),i()("/block-editor/","/post"),i()("/block-editor/post/","/post"),i()("/block-editor/post/:site/:post?",(({params:e={}})=>{const{site:t,post:s}=e;if(s)return i().redirect(`/post/${t}/${s}`);i().redirect(`/post/${t}/`)})),i()("/block-editor/page/","/page"),i()("/block-editor/page/:site/:page?",(({params:e={}})=>{const{site:t,page:s}=e;if(s)return i().redirect(`/page/${t}/${s}`);i().redirect(`/page/${t}/`)})),i()("/block-editor/edit/:customPostType/:site/:post?",(({params:e={}})=>{const{customPostType:t,site:s,post:o}=e;if(o)return i().redirect(`/edit/${t}/${s}/${o}`);i().redirect(`/edit/${t}/${s}`)}))}},"./lib/analytics/track-component-view/index.jsx":(e,t,s)=>{s.d(t,{Z:()=>u});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/debug/src/browser.js"),r=s.n(i),n=s("../node_modules/react/index.js"),a=s("../node_modules/react-redux/es/index.js"),c=s("./state/analytics/actions/bump-stat.js"),d=s("./state/analytics/actions/record.js");const l=r()("calypso:analytics:TrackComponentView");class p extends n.Component{componentDidMount(){l("Component did mount.");const{eventName:e,eventProperties:t}=this.props;e&&(l(`Recording Tracks event "${e}".`),this.props.recordTracksEvent(e,t));const{statGroup:s,statName:o}=this.props;s&&(l(`Bumping stat "${o}".`),this.props.bumpStat(s,o))}render(){return null}}(0,o.Z)(p,"defaultProps",{recordTracksEvent:()=>{},bumpStat:()=>{}});const u=(0,a.$j)(null,{bumpStat:c.P,recordTracksEvent:d.jN})(p)},"./lib/version-compare/index.js":(e,t,s)=>{s.d(t,{Z:()=>o});const o=function(e,t,s){let o=0,i=0,r=0;const n={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:1,pl:1},a=function(e){return(e=(e=(""+e).replace(/[_\-+]/g,".")).replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,".")).length?e.split("."):[-8]},c=function(e){return e?isNaN(e)?n[e]||-7:parseInt(e,10):0};for(e=a(e),t=a(t),i=Math.max(e.length,t.length),o=0;o<i;o++)if(e[o]!=t[o]){if(e[o]=c(e[o]),t[o]=c(t[o]),e[o]<t[o]){r=-1;break}if(e[o]>t[o]){r=1;break}}if(!s)return r;switch(s){case">":case"gt":return r>0;case">=":case"ge":return r>=0;case"<=":case"le":return r<=0;case"==":case"=":case"eq":return 0===r;case"<>":case"!=":case"ne":return 0!==r;case"":case"<":case"lt":return r<0;default:return null}}},"./my-sites/customize/panels.js":(e,t,s)=>{s.d(t,{t:()=>i});const o={widgets:["panel","widgets"],fonts:["section","jetpack_fonts"],identity:["section","title_tagline"],"custom-css":["section","jetpack_custom_css"],amp:["section","amp_design"],menus:["panel","nav_menus"],homepage:["section","static_front_page"],jetpack_search:["section","jetpack_search"]};function i(e){if(o.hasOwnProperty(e)){const[t,s]=o[e];return{[`autofocus[${t}]`]:s}}return null}},"./state/admin-menu/actions/index.js":(e,t,s)=>{s.d(t,{u:()=>i,w:()=>r});s("./state/admin-menu/init.js"),s("./state/data-layer/wpcom/sites/admin-menu/index.js");var o=s("./state/action-types.ts");const i=function(e){return{type:o.ObT,siteId:e}},r=function(e,t){return{type:o.N6b,siteId:e,menu:t}}},"./state/admin-menu/init.js":(e,t,s)=>{var o=s("./state/redux-store.ts"),i=s("../packages/state-utils/src/index.ts"),r=s("./state/action-types.ts"),n=s("./state/utils/schema-utils.js"),a=s("./state/utils/keyed-reducer.ts"),c=s("./state/utils/with-persistence.ts"),d=s("./state/utils/reducer-utils.ts");s("./state/data-layer/wpcom/sites/admin-menu/index.js");const l={slug:{type:"string"},title:{type:"string"},type:{type:"string"},url:{type:"string"},badge:{type:"string"}},p={type:"object",patternProperties:{"^\\d+$":{type:"array",items:{type:"object",required:["type"],properties:{...l,icon:{type:"string"},children:{type:"array",items:{type:"object",required:["type","parent"],properties:{...l,parent:{type:"string"}}}}}},additionalProperties:!1}}},u=(0,n.G)(p,(0,a.J)("siteId",(0,c.$)(((e=[],t)=>t.type===r.N6b?t.menu:e)))),m=(0,d.U)({menus:u,requesting:(e=!1,t)=>{switch(t.type){case r.ObT:case r.N6b:return t.type===r.ObT}return e}}),h=(0,i.xi)("adminMenu",m);(0,o.x)(["adminMenu"],h)},"./state/data-layer/wpcom/sites/admin-menu/index.js":(e,t,s)=>{var o=s("../packages/calypso-config/src/index.ts"),i=s("./lib/url/add-query-args.ts"),r=s("./state/action-types.ts"),n=s("./state/admin-menu/actions/index.js"),a=s("./state/data-layer/handler-registry.js"),c=s("./state/data-layer/wpcom-http/actions.js"),d=s("./state/data-layer/wpcom-http/utils.js"),l=s("./state/sites/selectors/get-site-admin-url.js"),p=s("./state/sites/selectors/get-site-slug.js");const u=(e,t)=>{const s=new RegExp("^/").test(e),o=new RegExp(`^${t?.replace(/^https?:\/\//,"")}`).test(e?.replace(/^https?:\/\//,""));return o&&e.includes("wp-admin/customize.php")&&(e=(0,i.Z)({return:document.location.href},e)),s||o?e:""},m=(e,t,s)=>{if(!e)return e;let i;return Array.isArray(e.children)&&(i=e.children.map((e=>m(e,t,s)))),"import-php"===e.slug&&(0,o._k)("importer/unified")&&(e.url=`/import/${t}`),{...e,url:u(e.url,s),...i?{children:i}:{}}};(0,a.Z9)("state/data-layer/wpcom/admin-menu/index.js",{[r.ObT]:[(0,d.BN)({fetch:e=>(0,c.d)({method:"GET",path:`/sites/${e.siteId}/admin-menu/`,apiNamespace:"wpcom/v2"},e),onSuccess:({siteId:e},t)=>(s,o)=>{if(!Array.isArray(t))return s((0,n.w)(e,t));const i=o(),r=(0,l.Z)(i,e),a=(0,p.Z)(i,e);return s((0,n.w)(e,t.map((e=>m(e,a,r)))))},onError:()=>null})]})},"./state/editor/actions.js":(e,t,s)=>{s.d(t,{jZ:()=>d,nF:()=>l,DG:()=>p,jP:()=>u});var o=s("./state/action-types.ts"),i=s("./state/analytics/actions/with-analytics.js"),r=s("./state/analytics/actions/bump-stat.js"),n=s("./state/ui/media-modal/actions.js"),a=s("./state/ui/media-modal/constants.js");s("./state/editor/init.js"),s("./state/ui/init.js");const c={[a.b.LIST]:"view_list",[a.b.DETAIL]:"view_detail",[a.b.GALLERY]:"view_gallery",[a.b.IMAGE_EDITOR]:"view_edit",[a.b.VIDEO_EDITOR]:"view_edit"};function d(e,t){return{type:o.gQI,siteId:e,postId:t}}function l(e,t){return{type:o.cnn,siteId:e,postId:t}}function p(e){const t=(0,n.v)(e),s=c[e];return s?(0,i.w)((0,r.P)("editor_media_actions",s),t):t}const u=(e=!0,t=null)=>({type:o.rQz,isIframeLoaded:e,iframePort:t})},"./state/editor/image-editor/constants.js":(e,t,s)=>{s.d(t,{Pr:()=>o,V3:()=>i,WC:()=>r});const o={FREE:"FREE",ORIGINAL:"ORIGINAL",ASPECT_1X1:"ASPECT_1X1",ASPECT_16X9:"ASPECT_16X9",ASPECT_4X3:"ASPECT_4X3",ASPECT_3X2:"ASPECT_3X2"},i={WIDTH:50,HEIGHT:50},r=Object.values(o)},"./state/editor/image-editor/reducer.js":(e,t,s)=>{s.d(t,{Rc:()=>d,ZP:()=>l});var o=s("./state/action-types.ts"),i=s("./state/utils/reducer-utils.ts"),r=s("./state/editor/image-editor/constants.js");const n={degrees:0,scaleX:1,scaleY:1},a={src:"",fileName:"default",mimeType:"image/png",title:"default"},c={topBound:0,leftBound:0,bottomBound:100,rightBound:100},d={topRatio:0,leftRatio:0,widthRatio:1,heightRatio:1};const l=(0,i.U)({hasChanges:function(e=!1,t){switch(t.type){case o.R3q:case o.Rev:case o.KM:case o.DEG:return!0;case o.uGF:case o.WfO:return!1;case o.URu:case o.r8n:return e}return e},fileInfo:function(e=a,t){switch(t.type){case o.upe:{const{src:s,fileName:o,mimeType:i,title:r}=t;return{...e,src:s,fileName:o,mimeType:i,title:r}}case o.WfO:return{...e,...a}}return e},transform:function(e=n,t){switch(t.type){case o.KM:return Object.assign({},e,{degrees:(e.degrees-90)%360});case o.DEG:return Object.assign({},e,{scaleX:-e.scaleX});case o.uGF:case o.WfO:return Object.assign({},n)}return e},cropBounds:function(e=c,t){return t.type===o.qoL?Object.assign({},e,{topBound:t.topBound,leftBound:t.leftBound,bottomBound:t.bottomBound,rightBound:t.rightBound}):e},crop:function(e=d,t){switch(t.type){case o.Rev:case o.r8n:return Object.assign({},e,{topRatio:t.topRatio,leftRatio:t.leftRatio,widthRatio:t.widthRatio,heightRatio:t.heightRatio});case o.KM:return{topRatio:1-e.widthRatio-e.leftRatio,leftRatio:e.topRatio,widthRatio:e.heightRatio,heightRatio:e.widthRatio};case o.DEG:return Object.assign({},e,{leftRatio:1-e.widthRatio-e.leftRatio});case o.uGF:case o.WfO:return Object.assign({},d)}return e},aspectRatio:function(e=r.Pr.FREE,t){switch(t.type){case o.R3q:case o.URu:return t.ratio;case o.uGF:case o.WfO:{const{additionalData:e={}}=t,{aspectRatio:s}=e;return s&&r.Pr[s]?s:r.Pr.FREE}}return e},originalAspectRatio:(e=null,t)=>{switch(t.type){case o.Rb3:{const{width:e,height:s}=t;return{width:e,height:s}}case o.WfO:return null}return e},imageIsLoading:function(e=!0,t){switch(t.type){case o.Rb3:return!1;case o.WfO:return!0}return e}})},"./state/editor/init.js":(e,t,s)=>{var o=s("./state/redux-store.ts"),i=s("../packages/state-utils/src/index.ts"),r=s("./state/action-types.ts"),n=s("./state/utils/reducer-utils.ts"),a=s("./state/editor/image-editor/reducer.js");const c=(0,n.U)({showError:(e,{type:t})=>t===r.nq_,uploadProgress:(e=null,{type:t,percentage:s})=>r.zSg===t?s:r.htm===t?null:e,url:(e=null,{type:t,posterUrl:s})=>r.htm===t?s:e});const d=(0,n.U)({postId:function(e=null,t){switch(t.type){case r.gQI:return t.postId;case r.cnn:return null;case r.hZH:return e===t.postId?t.savedPost.ID:e}return e},isIframeLoaded:function(e=!1,t){if(t.type===r.rQz){const s=t.isIframeLoaded;return void 0!==s?s:e}return e},iframePort:(e=null,t)=>{if(t.type===r.rQz){return t.isIframeLoaded&&t.iframePort?t.iframePort:null}return e},imageEditor:a.ZP,videoEditor:c}),l=(0,i.xi)("editor",d);(0,o.x)(["editor"],l)},"./state/legal/init.js":(e,t,s)=>{var o=s("./state/redux-store.ts"),i=s("../packages/state-utils/src/index.ts"),r=s("./state/action-types.ts");const n=(0,i.xi)("legal",((e={},{type:t,legalData:s})=>t===r.Lpm?s:e));(0,o.x)(["legal"],n)},"./state/media/actions.js":(e,t,s)=>{s.d(t,{s0:()=>_,dp:()=>v,e8:()=>P,Uy:()=>R,qB:()=>w,h6:()=>Z,d5:()=>b,Ap:()=>j,u0:()=>g,t9:()=>m,J_:()=>h,lh:()=>f,Un:()=>x,r6:()=>k,Kc:()=>T,_L:()=>S,af:()=>I,HU:()=>y});var o=s("./state/action-types.ts"),i=s("../node_modules/debug/src/browser.js"),r=s.n(i),n=s("../node_modules/lodash-es/isEqual.js"),a=s("../node_modules/lodash-es/omit.js"),c=s("./state/data-layer/handler-registry.js"),d=s("./state/data-layer/wpcom-http/actions.js"),l=s("./state/data-layer/wpcom-http/utils.js"),p=s("./state/selectors/get-next-page-query.js");const u=r()("calypso:middleware-media");(0,c.Z9)("state/data-layer/wpcom/sites/media/index.js",{[o.sZU]:[(0,l.BN)({fetch:function(e){u("Request media for site %d using query %o",e.siteId,e.query);const{siteId:t,query:s}=e,o=s&&s.source?`/meta/external-media/${s.source}`:`/sites/${t}/media`;return[(0,d.d)({method:"GET",path:o,apiVersion:"1.1",query:s},e)]},onSuccess:({siteId:e,query:t},s)=>(o,i)=>{(0,n.Z)((0,a.Z)(t,"page_handle"),(0,a.Z)((0,p.Z)(i(),e),"page_handle"))?(o(m(e,s.media,s.found,t)),o(y(e,t)),o(T(e,s.meta))):o(y(e,t))},onError:({siteId:e,query:t})=>g(e,t)})],[o.uz_]:[(0,l.BN)({fetch:function(e){const{mediaId:t,query:s,siteId:o}=e;return u("Request media item %d for site %d",t,o),[(0,d.d)({apiVersion:"1.2",method:"GET",path:`/sites/${o}/media/${t}`,query:s},e)]},onSuccess:({mediaId:e,siteId:t},s)=>[m(t,s),I(t,e)],onError:({mediaId:e,siteId:t})=>j(t,e)})]});s("./state/media/init.js");function m(e,t,s,i){return{type:o.iG7,siteId:e,media:Array.isArray(t)?t:[t],found:s,query:i}}function h(e,t){return{type:o.sZU,siteId:e,query:t}}function g(e,t,s=null){return{type:o.LEq,siteId:e,query:t,error:s}}function y(e,t){return{type:o.P4e,siteId:e,query:t}}function f(e,t){return{type:o.uz_,siteId:e,mediaId:t}}function j(e,t,s=null){return{type:o.F1b,siteId:e,mediaId:t,error:s}}function I(e,t){return{type:o.l44,siteId:e,mediaId:t}}function w(e,t){return{type:o.TuQ,site:e,transientMedia:t}}const b=(e,t,s,i)=>({type:o.QdR,siteId:e,mediaItem:t,data:s,originalMediaItem:i});function Z(e,t){return{type:o.aqr,mediaIds:Array.isArray(t)?t:[t],siteId:e}}function _(e){return{type:o.EzY,siteId:e}}function v(e,t){return{type:o.c0z,siteId:e,errorType:t}}function P(e,t){return{type:o.LEd,siteId:e,mediaId:t}}function k(e,t,s){return{type:o.zOw,siteId:e,mediaId:t,errors:s}}function x(e,t){return{type:o.OtT,media:t,siteId:e}}function T(e,t){return{type:o.Jfv,siteId:e,mediaRequestMeta:t}}function S(e,t){return{type:o.AsP,siteId:e,query:t}}function R(e){return{type:o._Ck,siteId:e}}},"./state/media/thunks/get-media-item.js":(e,t,s)=>{s.d(t,{Z:()=>i});var o=s("./state/selectors/get-media-item.js");function i(e,t){return(s,i)=>(0,o.Z)(i(),e,t)}},"./state/post-types/actions.js":(e,t,s)=>{s.d(t,{s:()=>a,r:()=>c});var o=s("./state/action-types.ts"),i=s("./state/data-layer/handler-registry.js"),r=s("./state/data-layer/wpcom-http/actions.js");const n=(0,s("./state/data-layer/wpcom-http/utils.js").BN)({fetch:e=>(0,r.d)({method:"GET",path:`/sites/${e.siteId}/post-types`},e),onSuccess:(e,t)=>a(e.siteId,t.post_types),onError:()=>{}});(0,i.Z9)("state/data-layer/wpcom/sites/post-types/index.js",{[o.aH1]:[n]});s("./state/post-types/init.js");function a(e,t){return{type:o.EXL,siteId:e,types:t}}function c(e){return{type:o.aH1,siteId:e}}},"./state/post-types/init.js":(e,t,s)=>{var o=s("./state/redux-store.ts"),i=s("../packages/state-utils/src/index.ts"),r=s("../node_modules/lodash-es/keyBy.js"),n=s("./state/action-types.ts"),a=s("./state/utils/schema-utils.js"),c=s("./state/utils/keyed-reducer.ts"),d=s("./state/utils/with-persistence.ts"),l=s("./state/utils/reducer-utils.ts");var p=s("../node_modules/lodash-es/merge.js");const u=(0,a.G)({type:"object",patternProperties:{"^[0-9]+$":{type:"object",patternProperties:{"^.*$":{type:"array",items:{type:"object",required:["name"],properties:{name:{type:"string"},label:{type:"string"},labels:{type:"object"},description:{type:"string"},hierarchical:{type:"boolean"},public:{type:"boolean"},capabilities:{type:"object"}}}}},additionalProperties:!1}},additionalProperties:!1},((e={},t)=>t.type===n.yGX?{...e,[t.siteId]:{...e[t.siteId],[t.postType]:t.taxonomies}}:e)),m=(0,l.U)({requesting:function(e={},t){switch(t.type){case n.qNU:case n.g0p:case n.onT:return(0,p.Z)({},e,{[t.siteId]:{[t.postType]:n.qNU===t.type}})}return e},items:u}),h=(0,a.G)({type:"object",additionalProperties:!1,patternProperties:{"^\\d+$":{type:"object",additionalProperties:{type:"object",required:["name"],properties:{name:{type:"string"},label:{type:"string"},labels:{type:"object"},description:{type:"string"},map_meta_cap:{type:"boolean"},capabilities:{type:"object"},api_queryable:{type:"boolean"},hierarchical:{type:"boolean"},supports:{type:"object"}}}}}},(0,c.J)("siteId",(0,d.$)(((e=null,t)=>t.type===n.EXL?(0,r.Z)(t.types,"name"):e)))),g=(0,l.U)({items:h,taxonomies:m}),y=(0,i.xi)("postTypes",g);(0,o.x)(["postTypes"],y)},"./state/post-types/selectors.js":(e,t,s)=>{s.d(t,{ec:()=>o,z_:()=>i,jS:()=>r,m_:()=>n,ZI:()=>a});s("./state/post-types/init.js");function o(e,t){return e.postTypes.items[t]||null}function i(e,t,s){const i=o(e,t);return i&&i[s]||null}function r(e,t,s,o,r){const n=i(e,t,s);if(n){let e=n.labels[o];return!r||"en"!==r&&"en-gb"!==r||(e=e[0].toUpperCase()+e.slice(1).toLowerCase()),e}return null}function n(e,t,s,o){if("post"===s)if("publicize"===o)return!0;const r=i(e,t,s);if(r)return!!r.supports[o];if("page"===s)if("publicize"===o)return!1;return null}function a(e,t,s){const i=o(e,t);return!!i&&!!i[s]}},"./state/posts/actions/edit-post.js":(e,t,s)=>{s.d(t,{d:()=>i});var o=s("./state/action-types.ts");s("./state/posts/init.js");function i(e,t=null,s){return{type:o.oD3,post:s,siteId:e,postId:t}}},"./state/posts/actions/receive-post.js":(e,t,s)=>{s.d(t,{h:()=>i});var o=s("./state/posts/actions/receive-posts.js");s("./state/posts/init.js");function i(e,t){return(0,o.x)([e],t)}},"./state/posts/actions/receive-posts.js":(e,t,s)=>{s.d(t,{x:()=>i});var o=s("./state/action-types.ts");s("./state/posts/init.js");function i(e,t){const s={type:o.hYA,posts:e};return t&&(s.saveMarker=t),s}},"./state/posts/actions/restore-post.js":(e,t,s)=>{s.d(t,{t:()=>l});var o=s("../packages/i18n-calypso/src/index.js"),i=s("../node_modules/lodash-es/truncate.js"),r=s("./lib/wp/browser.js"),n=s("./state/action-types.ts"),a=s("./state/notices/actions.ts"),c=s("./state/posts/actions/receive-post.js"),d=s("./state/posts/selectors/get-site-post.js");s("./state/posts/init.js");function l(e,t,s=!1){return(l,p)=>{l({type:n.F1Z,siteId:e,postId:t});const u=r.Z.site(e).post(t).restore();return u.then((i=>{l({type:n.rn5,siteId:e,postId:t}),l((0,c.h)(i)),s||l((0,a.RT)((0,o.Iu)("Post successfully restored")))}),(r=>{if(l({type:n.JZv,siteId:e,postId:t,error:r}),s)return;const c=(0,d.i)(p(),e,t);let u;u=c?(0,o.Iu)('An error occurred while restoring "%s"',{args:[(0,i.Z)(c.title,{length:24})]}):(0,o.Iu)("An error occurred while restoring the post"),l((0,a.tF)(u))})),u}}},"./state/posts/actions/save-post-success.js":(e,t,s)=>{s.d(t,{j:()=>a});var o=s("../packages/i18n-calypso/src/index.js"),i=s("./state/action-types.ts"),r=s("./state/notices/actions.ts"),n=s("./state/posts/actions/restore-post.js");s("./state/posts/init.js");function a(e,t=null,s,a,c=!1){return d=>{if(d({type:i.hZH,siteId:e,postId:t,savedPost:s,post:a}),!c)switch(a.status){case"trash":{const e="trash_"+s.global_ID;d((0,r.RT)((0,o.Iu)("Post successfully moved to trash."),{id:e,button:(0,o.Iu)("Undo"),onClick:()=>{d((0,r.qq)(e)),d((0,n.t)(s.site_ID,s.ID))}}));break}case"publish":d((0,r.RT)((0,o.Iu)("Post successfully published")))}}}},"./state/posts/actions/trash-post.js":(e,t,s)=>{s.d(t,{W:()=>a});var o=s("./lib/wp/browser.js"),i=s("./state/action-types.ts"),r=s("./state/posts/actions/receive-post.js"),n=s("./state/posts/actions/save-post-success.js");s("./state/posts/init.js");function a(e,t,s=!1){return a=>{const c={status:"trash"};a({type:i.CNw,siteId:e,postId:t,post:c});const d=o.Z.site(e).post(t).delete();return d.then((o=>{a((0,n.j)(e,t,o,c,s)),a((0,r.h)(o))}),(s=>{a({type:i.am4,siteId:e,postId:t,error:s})})),d}}},"./state/posts/revisions/actions.js":(e,t,s)=>{s.d(t,{uz:()=>l,VH:()=>p,o8:()=>c,Ps:()=>a,CK:()=>d,X2:()=>u,Wk:()=>m});var o=s("./state/action-types.ts"),i=s("./state/data-layer/handler-registry.js"),r=s("./state/data-layer/wpcom-http/actions.js");const n=(0,s("./state/data-layer/wpcom-http/utils.js").BN)({fetch:e=>{const{siteId:t,postId:s,postType:o,comparisons:i}=e;return(0,r.d)({apiVersion:"1.2",path:`/sites/${t}/${o}/${s}/diffs`,method:"GET",query:{comparisons:i}},e)},onSuccess:({siteId:e,postId:t},s)=>c({siteId:e,postId:t,...s}),onError:()=>{}});(0,i.Z9)("state/data-layer/wpcom/posts/revisions/index.js",{[o.XB4]:[n]});s("./state/posts/init.js");const a=(e,t,s="posts",i=[])=>({type:o.XB4,comparisons:i,postId:t,postType:s,siteId:e}),c=({diffs:e,postId:t,revisions:s,siteId:i})=>({type:o.vIA,diffs:e,postId:t,revisions:s,siteId:i}),d=e=>({type:o.N__,revisionId:e}),l=()=>({type:o.NYz}),p=()=>({type:o.gpX}),u=()=>({type:o.Se1}),m=()=>({type:o.bE0})},"./state/posts/selectors/get-edited-post-value.js":(e,t,s)=>{s.d(t,{r:()=>r});var o=s("../node_modules/lodash-es/get.js"),i=s("./state/posts/selectors/get-edited-post.js");s("./state/posts/init.js");function r(e,t,s,r){return(0,o.Z)((0,i.P)(e,t,s),r)}},"./state/selectors/get-next-page-handle.js":(e,t,s)=>{s.d(t,{Z:()=>i});var o=s("../node_modules/lodash-es/get.js");s("./state/media/init.js");function i(e,t){return(0,o.Z)(e.media.fetching,[t,"nextPageHandle"])}},"./state/selectors/get-next-page-query.js":(e,t,s)=>{s.d(t,{Z:()=>r});s("./state/media/init.js");var o=s("./state/selectors/get-next-page-handle.js");const i=Object.freeze({number:20});function r(e,t){if(!(t in e.media.fetching))return i;const s=function(e,t){return e.media.fetching[t]?.query??null}(e,t),r=(0,o.Z)(e,t);return["string","number"].includes(typeof r)?{...i,...s,page_handle:r}:{...i,...s}}},"./state/selectors/get-selected-editor.js":(e,t,s)=>{s.d(t,{E:()=>a});var o=s("../node_modules/lodash-es/get.js"),i=s("../packages/calypso-config/src/index.ts"),r=s("./state/selectors/is-vip-site.js");s("./state/selected-editor/init.js");const n=(e,t)=>{const s=(0,o.Z)(e,["selectedEditor",t],null);return!(!(0,i._k)("desktop")||!["gutenberg-redirect","gutenberg-redirect-and-style"].includes(s))||!!(0,r.Z)(e,t)},a=(e,t)=>{const s=(0,o.Z)(e,["selectedEditor",t],null);return["gutenberg-iframe","gutenberg-redirect","gutenberg-redirect-and-style","classic"].includes(s)?n(e,t)?"classic":s:null}},"./state/selectors/get-site-editor-url.js":(e,t,s)=>{s.d(t,{Z:()=>n});var o=s("./state/selectors/should-load-gutenframe.js"),i=s("./state/sites/selectors/get-site-admin-url.js"),r=s("./state/sites/selectors/get-site-slug.js");const n=(e,t)=>{const s=(0,i.Z)(e,t);if(!(0,o.F)(e,t))return`${s}site-editor.php`;return`/site-editor/${(0,r.Z)(e,t)}`}},"./state/selectors/get-site-setting.js":(e,t,s)=>{s.d(t,{Z:()=>r});var o=s("../node_modules/lodash-es/get.js"),i=s("./state/site-settings/selectors.js");function r(e,t,s){return(0,o.Z)((0,i.$1)(e,t),[s],null)}},"./state/selectors/is-user-registration-days-within-range.js":(e,t,s)=>{s.d(t,{Z:()=>i});var o=s("./state/current-user/selectors.js");function i(e,t,s,i){const r=(0,o.DI)(e);if(!r)return null;const n=((t=t||Date.now())-new Date(r))/864e5;return n>=s&&n<=i}},"./state/selectors/should-display-app-banner.ts":(e,t,s)=>{s.d(t,{Z:()=>y});var o=s("../packages/state-utils/src/index.ts"),i=s("../packages/viewport/src/index.ts"),r=s("../node_modules/lodash-es/includes.js"),n=s("./blocks/app-banner/utils.js"),a=s("./lib/e2e/index.ts"),c=s("./lib/mobile-app/index.js"),d=s("./state/preferences/selectors.js"),l=s("./state/selectors/is-notifications-open.js"),p=s("./state/selectors/should-display-tos-update-banner.js"),u=s("./state/signup/flow/selectors.js"),m=(s("./state/ui/init.js"),s("./state/ui/layout-focus/selectors.js"));function h(e){return e.ui.appBannerVisibility&&"sidebar"!==(0,m.d)(e)}var g=s("./state/ui/selectors/get-section-name.js");const y=(0,o.P1)((e=>{if((0,a.b)())return!1;if((0,p.V)(e))return!1;if(!h(e))return!1;if(!(0,d.V2)(e))return!1;const t=(0,g.Z)(e),s=(0,l.Z)(e),o=(0,n.lt)(t,s);if("setup-site"===(0,u.sP)(e)&&n.yv===o)return!1;if(!(0,r.Z)(n.AK,o))return!1;const m=(0,d.Oz)(e,n.jc),y=(0,n.zE)(m,o);return(0,i.tq)()&&!(0,c.H)()&&!y}),[p.V,h,d.V2,g.Z,l.Z,e=>(0,d.Oz)(e,n.jc)])},"./state/selectors/should-display-tos-update-banner.js":(e,t,s)=>{s.d(t,{V:()=>o});s("./state/legal/init.js");const o=e=>!0===e?.legal?.tos?.displayPrompt},"./state/signup/flow/selectors.js":(e,t,s)=>{s.d(t,{sP:()=>i,nf:()=>r,BS:()=>n});var o=s("../node_modules/lodash-es/get.js");s("./state/signup/init.js");function i(e){return(0,o.Z)(e,"signup.flow.currentFlowName","")}function r(e){return(0,o.Z)(e,"signup.flow.previousFlowName","")}function n(e){return(0,o.Z)(e,"signup.flow.excludedSteps",[])}},"./state/sites/selectors/get-customizer-url.js":(e,t,s)=>{s.d(t,{Z:()=>c});var o=s("./lib/url/add-query-args.ts"),i=s("./my-sites/customize/panels.js"),r=s("./state/sites/selectors/get-site-admin-url.js"),n=s("./state/sites/selectors/get-site-slug.js"),a=s("./state/sites/selectors/is-jetpack-site.ts");function c(e,t,s,c,d){if(!(0,a.Z)(e,t)){const i=(0,n.Z)(e,t),r=[""].concat(["customize",s,i].filter(Boolean)).join("/");return(0,o.Z)({return:c,guide:d},r)}const l=(0,r.Z)(e,t,"customize.php");return l?(c||"undefined"==typeof window||(c=window.location.href),(0,o.Z)({return:c,...(0,i.t)(s),guide:d},l)):null}},"./state/sites/selectors/get-site-admin-url.js":(e,t,s)=>{s.d(t,{Z:()=>i});var o=s("./state/sites/selectors/get-site-option.ts");function i(e,t,s=""){const i=(0,o.Z)(e,t,"admin_url");return i?i+s.replace(/^\//,""):null}},"./state/themes/constants.js":(e,t,s)=>{s.d(t,{w:()=>o});const o={search:"",tier:"",filter:"",number:20,offset:0,page:1}},"./state/themes/init.js":(e,t,s)=>{var o=s("./state/redux-store.ts"),i=s("../packages/state-utils/src/index.ts"),r=s("../node_modules/lodash-es/omit.js"),n=s("../node_modules/lodash-es/map.js"),a=s("../node_modules/lodash-es/mapValues.js"),c=s("./lib/formatting/decode-entities.ts"),d=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),l=s("./lib/query-manager/paginated/index.js");const p={search:"",tier:"",filter:"",number:20,offset:0,page:1};var u=s("../node_modules/lodash-es/omitBy.js"),m=s("./lib/query-manager/paginated/key.js");function h(e,t){return null==e||p[t]===e}class g extends m.Z{static stringify(e){return super.stringify((0,u.Z)(e,h))}static parse(e){return(0,u.Z)(super.parse(e),h)}}class y extends l.Z{static sort(){}}(0,d.Z)(y,"QueryKey",g),(0,d.Z)(y,"DefaultQuery",p);var f=s("./lib/query-manager/with-query-manager.js"),j=s("./state/themes/action-types.js"),I=s("./state/utils/schema-utils.js"),w=s("./state/utils/with-persistence.ts"),b=s("./state/utils/reducer-utils.ts");const Z={type:"object",properties:{_timestamp:{type:"number"}},patternProperties:{"^(wpcom|wporg|\\d+)$":(0,s("./lib/query-manager/schema.js").v)({title:"Theme",additionalProperties:!1,type:"object",patternProperties:{"^[\\w-]+$":{additionalProperties:!0,required:["id","name","author","screenshot"],type:"object",properties:{active:{type:"boolean"},author:{type:"string"},author_uri:{type:"string"},autoupdate:{type:"boolean"},autoupdate_translation:{type:"boolean"},demo_uri:{type:"string"},description:{type:"string"},id:{type:"string"},name:{type:"string"},price:{type:"string"},screenshot:{type:"string"},stylesheet:{type:"string"},tags:{type:"array",items:{type:"string"}},taxonomies:{type:"object"},theme_uri:{type:"string"},update:{type:["null","object"]},version:{type:"string"},seo_title:{type:"string"},seo_description:{type:"string"}}}}})},additionalProperties:!1};const _=(0,b.U)({backPath:function(e="/themes",t){return t.type===j.AT&&void 0!==t.path?t.path:e},themesBookmark:function(e="",t){return j.R2===t.type?t.payload:e}}),v=(0,b.U)({uploadedThemeId:(e={},t)=>{switch(t.type){case j.Rb:{const{siteId:s,themeId:o}=t;return{...e,[s]:o}}case j.rV:{const{siteId:s,themeId:o}=t;return{...e,[s]:o}}case j.Mv:{const{siteId:s}=t;return(0,r.Z)(e,s)}case j.QS:{const{siteId:s}=t;return(0,r.Z)(e,s)}case j.LG:{const{siteId:s}=t;return(0,r.Z)(e,s)}}return e},uploadError:(e={},t)=>{switch(t.type){case j.O_:{const{siteId:s,error:o}=t;return{...e,[s]:o}}case j.VD:{const{siteId:s,error:o}=t;return{...e,[s]:o}}case j.aB:{const{siteId:s,error:o}=t;return{...e,[s]:o}}case j.Mv:{const{siteId:s}=t;return(0,r.Z)(e,s)}case j.QS:{const{siteId:s}=t;return(0,r.Z)(e,s)}case j.LG:{const{siteId:s}=t;return(0,r.Z)(e,s)}}return e},progressLoaded:(e={},t)=>{switch(t.type){case j.PM:{const{siteId:s,loaded:o}=t;return{...e,[s]:o}}case j.A2:{const{siteId:s,loaded:o}=t;return{...e,[s]:o}}case j.Mv:{const{siteId:s}=t;return(0,r.Z)(e,s)}case j.QS:{const{siteId:s}=t;return(0,r.Z)(e,s)}case j.LG:{const{siteId:s}=t;return(0,r.Z)(e,s)}}return e},progressTotal:(e={},t)=>{switch(t.type){case j.PM:{const{siteId:s,total:o}=t;return{...e,[s]:o}}case j.A2:{const{siteId:s,total:o}=t;return{...e,[s]:o}}case j.Mv:{const{siteId:s}=t;return(0,r.Z)(e,s)}case j.QS:{const{siteId:s}=t;return(0,r.Z)(e,s)}case j.LG:{const{siteId:s}=t;return(0,r.Z)(e,s)}}return e},inProgress:(e={},t)=>{switch(t.type){case j.QS:{const{siteId:s}=t;return{...e,[s]:!0}}case j.LG:{const{siteId:s}=t;return{...e,[s]:!0}}case j.Mv:{const{siteId:s}=t;return{...e,[s]:!1}}case j.Rb:{const{siteId:s}=t;return{...e,[s]:!1}}case j.O_:{const{siteId:s}=t;return{...e,[s]:!1}}case j.rV:{const{siteId:s,status:o}=t;return{...e,[s]:"complete"!==o}}case j.aB:{const{siteId:s}=t;return{...e,[s]:!1}}case j.VD:{const{siteId:s}=t;return{...e,[s]:!1}}}return e}});var P=s("./state/themes/utils.js");const k=(0,I.G)({type:"object",patternProperties:{"^\\d+$":{description:"Theme ID",type:"string"}}},((e={},t)=>{switch(t.type){case j.hX:{const{siteId:s,themeStylesheet:o}=t;return{...e,[s]:(0,P.ph)(o)}}case j.a5:{const{siteId:s,theme:o}=t;return{...e,[s]:o.id}}}return e}));const x=(0,I.G)({type:"object",patternProperties:{"^(wpcom|wporg|\\d+)$":{type:"object",patternProperties:{"^\\w+$":{type:"object",properties:{path:{type:"string"},method:{type:"string"},name:{type:"string"},statusCode:{type:"number"},status:{type:"number"},message:{type:"string"},error:{type:"string"}}}}}}},((e={},t)=>{switch(t.type){case j.Iz:{const{siteId:s,themeId:o,error:i}=t;return{...e,[s]:{...e[s],[o]:i}}}case j.Mo:{const{siteId:s,themeId:o}=t;return{...e,[s]:(0,r.Z)(e[s],o)}}}return e}));function T(e){return e&&e.description?("string"!=typeof e.demo_uri&&(e.demo_uri=void 0),{...e,description:(0,c.S)(e.description)}):e}const S=(0,I.G)(Z,(0,w.$)(((e={},t)=>{switch(t.type){case j.K6:{const{siteId:s,query:o,themes:i,found:r}=t;return(0,f.Z)(e,s,(e=>e.receive((0,n.Z)(i,T),{query:o,found:r,patch:!0,dontShareQueryResultsWhenQueriesAreDifferent:!0})),(()=>new y(null,{itemKey:"id"})))}case j.AH:{const{siteId:s,themeId:o}=t;return(0,f.Z)(e,s,(e=>e.removeItem(o)))}}return e}),{serialize:e=>{const t=(0,a.Z)(e,(({data:e,options:t})=>({data:e,options:t})));return t._timestamp=Date.now(),t},deserialize:e=>e._timestamp&&e._timestamp+864e5<Date.now()?{}:(0,a.Z)((0,r.Z)(e,"_timestamp"),(({data:e,options:t})=>new y(e,t)))})),R=(0,I.G)({type:"object",patternProperties:{"^[\\w-]+$":{title:"Taxonomy",type:"object",patternProperties:{"^\\w+$":{title:"Term",type:"object",properties:{name:{type:"string"},description:{type:"string"}}}},uniqueItems:!0}},additionalProperties:!1},((e={},t)=>{if(t.type===j.Ie){const{filters:e}=t;return e}return e}));const E=(0,b.U)({queries:S,queryRequests:function(e={},t){let s;switch(t.type){case j.Fg:case j.K6:case j.In:return s=(0,P.cZ)(t.query,t.siteId),Object.assign({},e,{[s]:j.Fg===t.type})}return e},queryRequestErrors:(e={},t)=>{switch(t.type){case j.In:{const{siteId:s,query:o,error:i}=t,r=(0,P.cZ)(o,s);return{...e,[s]:{...e[s],[r]:i}}}case j.K6:{const{siteId:s,query:o}=t,i=(0,P.cZ)(o,s);return{...e,[s]:(0,r.Z)(e[s],i)}}}return e},lastQuery:(e={},t)=>{if(t.type===j.K6){const{siteId:s,query:o}=t;return{...e,[s]:o}}return e},themeInstalls:function(e={},t){switch(t.type){case j.pS:case j.Yg:case j.Si:return Object.assign({},e,{[t.siteId]:Object.assign({},e[t.siteId],{[t.themeId]:j.pS===t.type})})}return e},themeRequests:function(e={},t){switch(t.type){case j.KU:case j.Mo:case j.Iz:return Object.assign({},e,{[t.siteId]:Object.assign({},e[t.siteId],{[t.themeId]:j.KU===t.type})})}return e},themeRequestErrors:x,activeThemes:k,activeThemeRequests:function(e={},t){switch(t.type){case j.PG:case j.a5:case j.S_:return{...e,[t.siteId]:j.PG===t.type}}return e},activationRequests:function(e={},t){switch(t.type){case j.Qe:case j.hX:case j.q8:return{...e,[t.siteId]:j.Qe===t.type}}return e},completedActivationRequests:(e={},t)=>{switch(t.type){case j.hX:{const{siteId:s}=t;return{...e,[s]:!0}}case j.KC:{const{siteId:s}=t;return{...e,[s]:!1}}}return e},themesUI:_,uploadTheme:v,themePreviewOptions:(e={},t)=>{if(t.type===j.MC){const{themeId:e,primary:s,secondary:o,styleVariation:i}=t;return{themeId:e,primary:s,secondary:o,styleVariation:i}}return e},themePreviewVisibility:(e=null,t)=>{if(t.type===j.rF){const{themeId:e}=t;return e}return e},themeFilters:R,themeFilterRequestError:function(e=null,t){switch(t.type){case j.es:return t.error;case j.Ie:return null}return e},recommendedThemes:function(e={},t){switch(t.type){case j.a:return{...e,[t.filter]:{isLoading:!0,themes:e[t.filter]?.themes??[]}};case j.gI:return{...e,[t.filter]:{isLoading:!1,themes:t.payload.themes}};case j.rZ:return{...e,[t.filter]:{isLoading:!1,themes:e[t.filter]?.themes??[]}}}return e},trendingThemes:function(e={},t){switch(t.type){case j._F:return{...e,isLoading:!0,themes:[]};case j.t1:return{...e,isLoading:!1,themes:t.payload.themes};case j.$i:return{...e,isLoading:!1,themes:[]}}return e},themeHasAutoLoadingHomepageWarning:(e=null,t)=>{switch(t.type){case j.v5:return{themeId:t.themeId,show:!0,accepted:!1};case j.kc:return{themeId:t.themeId,show:!1,accepted:!0};case j.Qe:case j.hX:case j.q8:case j.Fp:return null}return e},themesUpdate:function(e={},t){const s=e.themesUpdating||[],o=e.themesUpdated||[],i=e.themesUpdateFailed||[];switch(t.type){case j.w_:return{...e,themesUpdating:[...s,...t.themeSlugs.filter((e=>-1===s.indexOf(e)))],themesUpdateFailed:[...(e.themesUpdateFailed||[]).filter((e=>-1===t.themeSlugs.indexOf(e)))]};case j.uG:return{...e,themesUpdating:[...(e.themesUpdating||[]).filter((e=>-1===t.themeSlugs.indexOf(e)))],themesUpdated:[...o,...t.themeSlugs.filter((e=>-1===o.indexOf(e)))]};case j.Nf:return{...e,themesUpdating:[...(e.themesUpdating||[]).filter((e=>-1===t.themeSlugs.indexOf(e)))],themesUpdateFailed:[...i,...t.themeSlugs.filter((e=>-1===i.indexOf(e)))]}}return e},upsellCardDisplayed:function(e=!1,t){if(t.type===j.$j){const{displayed:e}=t;return e}return e},isLoadingCart:function(e=!1,t){if(t.type===j.pR){const{isLoading:e}=t;return e}return e},startActivationSync:function(e={},{type:t,siteId:s,themeId:o}){switch(t){case j.BW:return{...e,[s]:{...e[s],[o]:!0}};case j.Go:return{...e,[s]:(0,r.Z)(e[s],o)}}return e}}),C=(0,i.xi)("themes",E);(0,o.x)(["themes"],C)},"./state/themes/selectors/get-active-theme.js":(e,t,s)=>{s.d(t,{z:()=>o});s("./state/themes/init.js");function o(e,t){const s=e.themes.activeThemes[t]??null;return s&&s.replace("-wpcom","")}},"./state/themes/utils.js":(e,t,s)=>{s.d(t,{I5:()=>m,gW:()=>h,Iz:()=>g,QW:()=>y,ph:()=>f,cZ:()=>j,k1:()=>I,v0:()=>w,_p:()=>b});var o=s("../node_modules/lodash-es/get.js"),i=s("../node_modules/lodash-es/startsWith.js"),r=s("../node_modules/lodash-es/omit.js"),n=s("../node_modules/lodash-es/map.js"),a=s("../node_modules/lodash-es/mapKeys.js"),c=s("../node_modules/lodash-es/omitBy.js"),d=s("../node_modules/lodash-es/some.js"),l=s("../node_modules/lodash-es/includes.js"),p=s("./state/themes/constants.js");const u=["feature"];function m(e){const t=(0,o.Z)(e,"stylesheet",!1);return t&&(0,i.Z)(t,"premium/")}function h(e={}){return e.tags?{...(0,r.Z)(e,"tags"),taxonomies:{theme_feature:(0,n.Z)(e.tags,(e=>({slug:e})))}}:e}function g(e){const t={description_long:"descriptionLong",support_documentation:"supportDocumentation",download_uri:"download"};return(0,a.Z)(e,((e,s)=>(0,o.Z)(t,s,s)))}function y(e){const t={slug:"id",preview_url:"demo_uri",screenshot_url:"screenshot",download_link:"download"},s=(0,a.Z)((0,r.Z)(e,["sections","author"]),((e,s)=>(0,o.Z)(t,s,s))),i=(0,o.Z)(e,["sections","description"]);i&&(s.description=i);const c=(0,o.Z)(e,["author","display_name"]);return c&&(s.author=c),s.tags?{...(0,r.Z)(s,"tags"),taxonomies:{theme_feature:(0,n.Z)(s.tags,((e,t)=>({name:e,slug:t})))}}:s}function f(e){const[,t]=e?.split("/",2)??[];return t||e}function j(e={},t){const s=function(e){return(0,c.Z)(e,((e,t)=>p.w[t]===e))}(e),o=JSON.stringify(s);return t?[t,o].join(":"):o}function I(e,t){return j((0,r.Z)(e,"page"),t)}function w(e,t){const s={...p.w,...e};return Object.entries(s).every((([e,s])=>{switch(e){case"search":{if(!s)return!0;const e=s.toLowerCase();return(0,d.Z)(u,(s=>t.taxonomies&&(0,d.Z)(t.taxonomies["theme_"+s],(({name:t})=>t&&(0,l.Z)(t.toLowerCase(),e)))))||t.id&&(0,l.Z)(t.id.toLowerCase(),e)||t.name&&(0,l.Z)(t.name.toLowerCase(),e)||t.author&&(0,l.Z)(t.author.toLowerCase(),e)||t.descriptionLong&&(0,l.Z)(t.descriptionLong.toLowerCase(),e)}case"filter":if(!s)return!0;return s.split(",").every((e=>(0,d.Z)(t.taxonomies,(t=>(0,d.Z)(t,{slug:e})))))}return!0}))}function b(e,t){return(0,o.Z)(e,["taxonomies",t],[]).map((({slug:e})=>e))}},"./state/ui/media-modal/actions.js":(e,t,s)=>{s.d(t,{v:()=>i,M:()=>r});var o=s("./state/action-types.ts");s("./state/ui/init.js");function i(e){return{type:o.WkZ,view:e}}function r(){return i(null)}},"./state/ui/media-modal/constants.js":(e,t,s)=>{s.d(t,{b:()=>o});const o={LIST:"LIST",DETAIL:"DETAIL",GALLERY:"GALLERY",IMAGE_EDITOR:"IMAGE_EDITOR",VIDEO_EDITOR:"VIDEO_EDITOR"}},"../packages/calypso-products/src/camel-or-snake-slug.ts":(e,t,s)=>{function o(e){return"product_slug"in e?e.product_slug:e.productSlug}s.d(t,{e:()=>o})},"../packages/calypso-products/src/is-free-plan.ts":(e,t,s)=>{s.d(t,{V:()=>r});var o=s("../packages/calypso-products/src/camel-or-snake-slug.ts"),i=s("../packages/calypso-products/src/constants/wpcom.ts");function r(e){return e&&(0,o.e)(e)===i._d}}}]);