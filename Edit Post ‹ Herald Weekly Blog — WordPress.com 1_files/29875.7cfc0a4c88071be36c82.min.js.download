"use strict";(globalThis.webpackChunkcalypso=globalThis.webpackChunkcalypso||[]).push([[29875],{"./state/preferences/use-async-preference.ts":(e,s,t)=>{t.d(s,{L:()=>a});var n=t("../node_modules/react/index.js"),r=t("../node_modules/react-redux/es/index.js"),o=t("./state/preferences/actions.js"),c=t("./state/preferences/selectors.js");const a=({defaultValue:e,preferenceName:s})=>{const t=(0,r.oR)(),a=(0,r.I0)(),i=(0,r.v9)(c.V2),[u,l]=(0,n.useState)((()=>i?(0,c.Oz)(t.getState(),s)??e:"none"));(0,n.useEffect)((()=>{i&&l((0,c.Oz)(t.getState(),s)??e)}),[i,t,s,e]);return[u,(0,n.useCallback)((e=>(l(e),a((0,o.zZ)(s,e)))),[a,s])]}},"./state/sites/hooks/use-sites-sorting.ts":(e,s,t)=>{t.d(s,{KR:()=>u,pt:()=>l,ph:()=>d});var n=t("../packages/sites/src/use-sites-list-sorting.tsx"),r=t("../node_modules/react-redux/es/index.js"),o=t("./state/current-user/selectors.js"),c=t("./state/preferences/use-async-preference.ts");const a={sortKey:"alphabetically",sortOrder:"asc"},i={sortKey:"lastInteractedWith",sortOrder:"desc"},u=e=>{const[s,t]=e.split("-"),r={sortKey:s,sortOrder:t};return(0,n.Rr)(r)?r:a},l=e=>`${e.sortKey}-${e.sortOrder}`,d=()=>{const e=(0,r.v9)((e=>(0,o.bo)(e))),[s,t]=(0,c.L)({defaultValue:l(e&&e>6?i:a),preferenceName:"sites-sorting"});return{hasSitesSortingPreferenceLoaded:"none"!==s,sitesSorting:u(s),onSitesSortingChange:e=>{t(l(e))}}}},"../packages/search/src/search.tsx":(e,s,t)=>{t.d(s,{Z:()=>v});var n=t("../node_modules/@wordpress/components/build-module/button/index.js"),r=t("../node_modules/@wordpress/components/build-module/spinner/index.js"),o=t("../node_modules/@wordpress/compose/build-module/hooks/use-instance-id/index.js"),c=t("../node_modules/@wordpress/icons/build-module/icon/index.js"),a=t("../node_modules/@wordpress/icons/build-module/library/search.js"),i=t("../node_modules/@wordpress/icons/build-module/library/close.js"),u=t("../node_modules/@wordpress/react-i18n/build-module/index.js"),l=t("../node_modules/classnames/index.js"),d=t.n(l),p=t("../node_modules/lodash-es/debounce.js"),m=t("../node_modules/react/index.js");var h=t("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const f=e=>s=>{switch(s.key){case" ":case"Enter":e(s)}},g=({children:e,childrenBeforeCloseButton:s,delaySearch:t=!1,disabled:l=!1,pinned:_=!1,onSearchClose:v,onSearchChange:b,onSearch:x,onBlur:y,onKeyDown:w,onClick:C,describedBy:S,delayTimeout:k=300,defaultValue:j="",defaultIsOpen:Z=!1,autoFocus:L=!1,onSearchOpen:R,recordEvent:M,overlayStyling:O,placeholder:B,inputLabel:K,disableAutocorrect:N=!1,className:I,dir:D,fitsContainer:E=!1,searching:z=!1,compact:T=!1,hideOpenIcon:$=!1,openIconSide:F="left",minLength:A,maxLength:P,hideClose:Q=!1,isReskinned:U=!1,searchMode:X="when-typing",searchIcon:q},V)=>{const{__:W}=(0,u.QT)(),[G,H]=m.useState(j),[J,Y]=m.useState(Z),[ee,se]=m.useState(L),te=(0,o.Z)(g,"search"),ne=m.useRef(null),re=m.useRef(null),oe=m.useRef(null),ce=m.useRef(!0);m.useImperativeHandle(V,(()=>({focus(){ne.current?.focus()},blur(){ne.current?.blur()},setKeyword(e){H(e)},clear(){H("")}})),[]);const ae=m.useMemo((()=>x?t?(0,p.Z)(x,k):x:()=>{}),[x,k,t]);(0,m.useEffect)((()=>{G&&x?.(G)}),[]),function(e,s){const t=m.useRef(!1);m.useEffect((()=>{if(t.current)return e();t.current=!0}),s)}((()=>{"on-enter"!==X&&(G?ae(G):(t&&ae.cancel?.(),x?.(G)),b?.(G))}),[G]);const ie=e=>{e.preventDefault(),H(""),Y(!0),M?.("Clicked Open Search")},ue=e=>{e.preventDefault(),l||(H(""),"on-enter"===X&&(x?.(""),b?.("")),Y(!1),ne.current&&(ne.current.value=""),_?(ne.current?.blur(),re.current?.focus()):ne.current?.focus(),v?.(e),M?.("Clicked Close Search"))};m.useEffect((()=>{ce.current?ce.current=!1:J&&(ne.current?.focus(),re.current?.blur())}),[J]);const le=f(ue),de=f(ie),pe=()=>{window.requestAnimationFrame((()=>{oe.current&&ne.current&&(oe.current.scrollLeft=(e=>{if(!e.createTextRange)return e.scrollLeft;const s=e.createTextRange(),t=window.getComputedStyle(e,void 0),n=parseFloat(t.paddingLeft),r=s.getBoundingClientRect();return e.getBoundingClientRect().left+e.clientLeft+n-r.left})(ne.current))}))};m.useEffect((()=>{pe()}),[G,J,ee]);const me=G,he=B||W("Searchâ€¦","default"),fe=J||!_||me,ge=N&&{autoComplete:"off",autoCorrect:"off",spellCheck:"false"},_e=d()("search-component",I,D,{"is-expanded-to-container":E,"is-open":fe,"is-searching":z,"is-compact":T,"has-focus":ee,"has-open-icon":!$}),ve=d()("search-component__input-fade",D),be=d()("search-component__input",D),xe="right"===F&&!G,ye=()=>{const e=_&&!J;return q||(U?(()=>{const e=(0,h.BX)("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,h.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.8269 19.8984L8.49362 24.5651L7.50586 23.4362L12.8392 18.7695L13.8269 19.8984Z"}),(0,h.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.9994 21.1667C21.221 21.1667 23.8327 18.555 23.8327 15.3333C23.8327 12.1117 21.221 9.5 17.9994 9.5C14.7777 9.5 12.166 12.1117 12.166 15.3333C12.166 18.555 14.7777 21.1667 17.9994 21.1667ZM17.9994 22.6667C22.0494 22.6667 25.3327 19.3834 25.3327 15.3333C25.3327 11.2832 22.0494 8 17.9994 8C13.9493 8 10.666 11.2832 10.666 15.3333C10.666 19.3834 13.9493 22.6667 17.9994 22.6667Z"})]});return(0,h.tZ)(c.Z,{icon:e,size:32,className:"search-component__icon-search"})})():(0,h.tZ)(n.Z,{className:"search-component__icon-navigation",ref:re,onClick:e?ie:()=>ne.current?.focus(),tabIndex:e?0:void 0,onKeyDown:e?de:void 0,"aria-controls":"search-component-"+te,"aria-label":W("Open Search","default"),children:!$&&(0,h.tZ)(c.Z,{icon:a.Z,className:"search-component__open-icon"})}))};return(0,h.BX)("div",{dir:D,className:_e,role:"search",children:[(0,h.tZ)(r.ZP,{}),"left"===F&&ye(),(0,h.BX)("form",{className:ve,action:".",onSubmit:e=>{"on-enter"===X&&(x?.(G),b?.(G)),e.preventDefault(),e.stopPropagation()},children:[(0,h.tZ)("input",{type:"search",id:"search-component-"+te,autoFocus:L,"aria-describedby":S,"aria-label":K||W("Search","default"),"aria-hidden":!fe,className:be,placeholder:he,role:"searchbox",value:me,ref:ne,onChange:e=>{H(e.target.value)},onKeyUp:e=>{"Enter"===e.key&&window.innerWidth<480&&blur(),_&&("Escape"===e.key&&le(e),pe())},onKeyDown:e=>{pe(),"Escape"===e.key&&""===e.currentTarget.value&&le(e),w?.(e)},onMouseUp:C,onFocus:()=>{if(se(!0),R?.(),!ne.current)return;const e=ne.current.value;e&&(ne.current.value="",ne.current.value=e)},onBlur:e=>{y?.(e),se(!1)},disabled:l,autoCapitalize:"none",dir:D,maxLength:P,minLength:A,...ge}),"function"==typeof O?(0,h.tZ)("div",{className:"search-component__text-overlay",ref:oe,children:O(G)}):null]}),s,xe?ye():Q||!G&&!J?null:(0,h.tZ)(n.Z,{className:"search-component__icon-navigation",onClick:ue,tabIndex:0,onKeyDown:le,"aria-controls":"search-component-"+te,"aria-label":W("Close Search","default"),children:(0,h.tZ)(c.Z,{icon:i.Z,className:"search-component__close-icon"})}),e]})},_=m.forwardRef(g);_.displayName="Search";const v=_},"../packages/search/src/use-fuzzy-search.ts":(e,s,t)=>{t.d(s,{X:()=>c});var n=t("../packages/search/node_modules/fuse.js/dist/fuse.esm.js"),r=t("../node_modules/react/index.js");const o={threshold:.4,ignoreLocation:!0},c=({data:e,keys:s=[],query:t="",options:c=o})=>{const a=(0,r.useMemo)((()=>new n.Z([],{keys:s,includeScore:!1,includeMatches:!1,...c})),[s,c]);return(0,r.useMemo)((()=>t?(a.setCollection(e),a.search(t).map((({item:e})=>e))):e),[a,t,e])}},"../packages/sites/src/create-sites-list-component.ts":(e,s,t)=>{t.d(s,{J:()=>c});var n=t("../packages/sites/src/use-sites-list-filtering.tsx"),r=t("../packages/sites/src/use-sites-list-grouping.tsx"),o=t("../packages/sites/src/use-sites-list-sorting.tsx");const c=({grouping:e,sorting:s,filtering:t}={})=>({children:c,...a})=>{const i=((e,s)=>{if(e){const e=s,{currentStatusGroup:t,statuses:n}=(0,r.UC)(e.sites,e.grouping);return{...e,sites:t,statuses:n}}return s})(e??!0,a),u=((e,s)=>{if(e){const e=s;return{...e,sites:(0,o.mi)(e.sites,e.sorting??{})}}return s})(s??!0,i),l=((e,s)=>{if(e){const e=s;return{...e,sites:(0,n.t)(e.sites,e.filtering??{})}}return s})(t??!0,u);return c(l)}},"../packages/sites/src/site-status.tsx":(e,s,t)=>{t.d(s,{Lc:()=>o,QB:()=>c,Z$:()=>a,Lr:()=>i});var n=t("../node_modules/@wordpress/react-i18n/build-module/index.js"),r=t("../node_modules/react/index.js");const o=["public","private","coming-soon","redirect"],c=e=>e.options?.is_redirect?"redirect":e.is_coming_soon||e.is_private&&"unlaunched"===e.launch_status?"coming-soon":e.is_private?"private":"public",a=()=>{const{_x:e}=(0,n.QT)();return(0,r.useMemo)((()=>({"coming-soon":e("Coming soon","site"),private:e("Private","site"),public:e("Public","site"),redirect:e("Redirect","site")})),[e])},i=e=>a()[c(e)]},"../packages/sites/src/use-sites-list-filtering.tsx":(e,s,t)=>{t.d(s,{$:()=>r,t:()=>o});var n=t("../packages/search/src/use-fuzzy-search.ts");const r=["name","slug","title","URL"];function o(e,{search:s}){return(0,n.X)({data:e,keys:r,query:s})}},"../packages/sites/src/use-sites-list-grouping.tsx":(e,s,t)=>{t.d(s,{qS:()=>c,Z8:()=>a,UC:()=>i});var n=t("../node_modules/@wordpress/react-i18n/build-module/index.js"),r=t("../node_modules/react/index.js"),o=t("../packages/sites/src/site-status.tsx");const c="all",a=[c,...o.Lc],i=(e,{showHidden:s=!1,status:t})=>{const{__:c}=(0,n.QT)(),i=(0,o.Z$)(),u=(0,r.useMemo)((()=>({all:c("All sites"),...i})),[c,i]),[l,d]=(0,r.useMemo)((()=>{const t=a.map((e=>({name:e,title:u[e],count:0,hiddenCount:0}))),n={all:0,"coming-soon":0,public:0,private:0,redirect:0},r=e.reduce(((e,t)=>{const r=(0,o.QB)(t);return t.visible||s||(n.all++,n[r]++),(t.visible||s)&&e[r].push(t),t.visible&&!s&&e.all.push(t),e}),{all:s?e:[],"coming-soon":[],public:[],private:[],redirect:[]});for(const e of t)e.count=r[e.name].length,e.hiddenCount=n[e.name];return[t,r]}),[e,u,s]);return{statuses:l,currentStatusGroup:d[t]}}},"../packages/sites/src/use-sites-list-sorting.tsx":(e,s,t)=>{t.d(s,{Rr:()=>i,mi:()=>u});var n=t("../node_modules/@wordpress/compose/build-module/utils/create-higher-order-component/index.js"),r=t("../node_modules/react/index.js"),o=t("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const c=["lastInteractedWith","updatedAt","alphabetically"],a=["asc","desc"],i=e=>{const{sortKey:s,sortOrder:t}=e;return c.includes(s)&&a.includes(t)};function u(e,{sortKey:s,sortOrder:t="asc"}){return(0,r.useMemo)((()=>{switch(s){case"lastInteractedWith":return function(e,s){const t=e.filter(p),n=e.filter((e=>!e.user_interactions||0===e.user_interactions.length)),r=[...d(t),...n.sort(((e,s)=>h(e,s,"desc")))];return"desc"===s?r:r.reverse()}(e,t);case"alphabetically":return function(e,s){return[...e].sort(((e,t)=>m(e,t,s)))}(e,t);case"updatedAt":return function(e,s){return[...e].sort(((e,t)=>h(e,t,s)))}(e,t);default:return e}}),[e,s,t])}const l=(e,s)=>{const t=new Date(e).valueOf(),n=new Date(t-864e5*s);return`${n.getFullYear()}-${n.getMonth().toString().padStart(2,"0")}-${n.getDate().toString().padStart(2,"0")}`},d=e=>{const[s]=e.map((e=>e.user_interactions)).flat().sort().reverse(),t=l(s,3),n=l(s,7),r=l(s,14),o=e=>e.reduce(((e,s)=>(s>=t?e+=3:s>=n?e+=2:s>=r&&(e+=1),e)),0);return e.sort(((e,s)=>{const t=e.user_interactions[0],n=s.user_interactions[0];if(t>r||n>r){const t=o(e.user_interactions),n=o(s.user_interactions);if(t>n)return-1;if(t<n)return 1}return t>n?-1:t<n?1:m(e,s,"asc")}))},p=e=>!!e.user_interactions&&e.user_interactions.length>0;function m(e,s,t){const n=e.title.toLocaleLowerCase(),r=s.title.toLocaleLowerCase();return n>r?"asc"===t?1:-1:n<r?"asc"===t?-1:1:0}function h(e,s,t){return e.options?.updated_at&&s.options?.updated_at?e.options.updated_at>s.options.updated_at?"asc"===t?1:-1:e.options.updated_at<s.options.updated_at?"asc"===t?-1:1:0:0}(0,n.o)((e=>s=>{const t=u(s.sites,s.sitesSorting);return(0,o.tZ)(e,{...s,sites:t})}),"withSitesSorting")}}]);