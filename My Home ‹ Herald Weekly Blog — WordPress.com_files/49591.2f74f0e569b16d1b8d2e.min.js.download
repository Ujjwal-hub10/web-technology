"use strict";(globalThis.webpackChunkcalypso=globalThis.webpackChunkcalypso||[]).push([[49591],{"./blocks/site-icon/index.jsx":(e,t,s)=>{s.d(t,{Z:()=>x});var i=s("../packages/components/src/gridicon/index.tsx"),n=s("../packages/components/src/spinner/index.tsx"),r=s("../node_modules/classnames/index.js"),o=s.n(r),a=s("../node_modules/lodash-es/get.js"),c=s("../node_modules/react-redux/es/index.js"),l=s("./components/data/query-sites/index.jsx"),d=s("./components/image/index.tsx"),p=s("./lib/resize-image-url/index.js"),u=s("./my-sites/media-library/media-image.tsx"),m=s("./state/selectors/get-site-icon-id.js"),h=s("./state/selectors/get-site-icon-url.js"),g=s("./state/selectors/get-media-item.js");function Z(e,t,s){return!!(0,a.Z)((0,g.Z)(e,t,s),"transient")}var j=s("./state/sites/selectors/get-site.js"),_=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function f({siteId:e,site:t,iconUrl:s,size:r,imgSize:a,isTransientIcon:c,defaultIcon:m}){const h=(0,p.Z)(s,a),g=o()("site-icon",{"is-blank":!h,"is-transient":c}),Z={height:r,width:r,lineHeight:r+"px",fontSize:r+"px"},j=m||(0,_.tZ)(i.Z,{icon:"globe",size:Math.round(r/1.8)});return(0,_.BX)("div",{className:g,style:Z,children:[!t&&e>0&&(0,_.tZ)(l.Z,{siteId:e}),h?(0,_.tZ)(u.Z,{component:d.Z,className:"site-icon__img",src:h,alt:""}):j,c&&(0,_.tZ)(n.$,{})]})}f.defaultProps={imgSize:120,size:32,defaultIcon:null};const x=(0,c.$j)(((e,{site:t,siteId:s,imgSize:i})=>{const n=(0,j.Z)(e,(0,a.Z)(t,"ID",s));if(!n)return{iconUrl:(0,a.Z)(t,"icon.img")};const r=(0,m.Z)(e,n.ID);return{site:n,iconUrl:(0,h.Z)(e,n.ID,i),isTransientIcon:Z(e,n.ID,r)}}))(f)},"./blocks/site/index.jsx":(e,t,s)=>{s.d(t,{Z:()=>G});var i=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("../packages/calypso-config/src/index.ts"),r=s("../packages/components/src/gridicon/index.tsx"),o=s("../node_modules/@wordpress/icons/build-module/library/layout.js"),a=s("../node_modules/classnames/index.js"),c=s.n(a),l=s("../packages/i18n-calypso/src/localize.js"),d=s("../node_modules/page/page.js"),p=s.n(d),u=s("../node_modules/react/index.js"),m=s("../node_modules/react-redux/es/index.js"),h=s("./blocks/site-icon/index.jsx"),g=s("./lib/jetpack/is-jetpack-cloud.ts"),Z=s("../packages/components/src/button/index.tsx"),j=s("./components/animate/index.jsx"),_=s("./components/data/query-site-connection-status/index.jsx"),f=s("./components/external-link/index.jsx"),x=s("./state/analytics/actions/record.js"),v=s("./state/analytics/actions/compose-analytics.js"),b=s("./state/selectors/can-current-user.js"),y=s("./state/selectors/get-site-connection-status.js"),k=s("./state/selectors/is-site-automated-transfer.ts"),I=s("./state/sites/selectors/is-jetpack-site.ts"),w=s("./state/selectors/get-raw-site.ts");function S(e,t){return(0,w.Z)(e,t)?.updates??null}var E=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const U=e=>(0,E.tZ)(f.Z,{icon:!0,iconSize:12,target:"_blank",...e});class C extends u.Component{constructor(...e){super(...e),(0,i.Z)(this,"state",{expand:!1}),(0,i.Z)(this,"toggleExpand",(()=>{this.setState({expand:!this.state.expand});const e=this.state.expand?"Collapse":"Expand";this.props.recordGoogleEvent("Site-Indicator",`Clicked to ${e} the Site Indicator`)})),(0,i.Z)(this,"handlePluginsUpdate",(()=>{const{siteUpdates:e}=this.props;this.recordEvent("Clicked updates available link to plugins updates",e&&e.total)})),(0,i.Z)(this,"handleThemesUpdate",(()=>{const{siteUpdates:e}=this.props;this.recordEvent("Clicked updates available link to theme updates",e&&e.total)})),(0,i.Z)(this,"handleCoreUpdate",(()=>{this.recordEvent("Clicked updates available link to WordPress updates",1)})),(0,i.Z)(this,"handleMultipleUpdate",(()=>{const{siteUpdates:e}=this.props;this.recordEvent("Clicked updates available link for multiple updates",e&&e.total)})),(0,i.Z)(this,"handleGenericUpdate",(()=>{const{siteUpdates:e}=this.props;this.props.recordGoogleEvent("Site-Indicator","Clicked updates available link to wp-admin updates","Total Updates",e&&e.total)}))}hasUpdate(){const{siteUpdates:e}=this.props;return e&&!this.hasError()&&e.total>0}hasError(){return!1===this.props.siteIsConnected}showIndicator(){const{siteIsAutomatedTransfer:e,siteIsJetpack:t,userCanManage:s}=this.props;return s&&t&&!e&&(this.hasUpdate()||this.hasError())}updatesAvailable(){const{site:e,siteUpdates:t,translate:s}=this.props,i="/activity-log/"+e.slug;return t.wordpress===t.total&&e.canUpdateFiles?(0,E.tZ)("span",{children:s("A newer version of WordPress is available. {{link}}Update to %(version)s{{/link}}",{components:{link:(0,E.tZ)("a",{href:i,onClick:this.handleCoreUpdate})},args:{version:t.wp_update_version}})}):t.plugins===t.total&&e.canUpdateFiles?(0,E.tZ)("span",{children:(0,E.tZ)("a",{onClick:this.handlePluginsUpdate,href:i,children:s("There is a plugin update available.","There are plugin updates available.",{count:t.total})})}):t.themes===t.total&&e.canUpdateFiles?(0,E.tZ)("span",{children:(0,E.tZ)("a",{onClick:this.handleThemesUpdate,href:i,children:s("There is a theme update available.","There are theme updates available.",{count:t.total})})}):t.themes+t.plugins+t.wordpress===t.total&&e.canUpdateFiles?(0,E.tZ)("span",{children:(0,E.tZ)("a",{onClick:this.handleMultipleUpdate,href:i,children:s("There are updates available.")})}):(0,E.tZ)("span",{children:(0,E.tZ)(U,{onClick:this.handleGenericUpdate,href:e.options.admin_url+"update-core.php",children:s("There is an update available.","There are updates available.",{count:t.total})})})}recordEvent(e,t){window.scrollTo(0,0),this.setState({expand:!1}),this.props.recordGoogleEvent("Site-Indicator",e,"Total Updates",t)}errorAccessing(){const{site:e,translate:t}=this.props;return e?(0,E.BX)("span",{children:[t("This site cannot be accessed."),(0,E.tZ)(Z.Z,{borderless:!0,compact:!0,scary:!0,href:`/settings/disconnect-site/${e.slug}?type=down`,onClick:this.props.trackSiteDisconnect,children:t("Iâ€™d like to fix this now")})]}):(0,E.tZ)("span",{children:t("This site cannot be accessed.")})}getText(){return this.hasUpdate()?this.updatesAvailable():this.hasError()?this.errorAccessing():null}getIcon(){return this.hasUpdate()?"sync":this.hasError()?"notice":void 0}renderIndicator(){const e=c()({"is-expanded":this.state.expand,"is-update":this.hasUpdate(),"is-error":this.hasError(),"is-action":!0,"site-indicator__main":!0});return(0,E.BX)("div",{className:e,children:[!this.state.expand&&(0,E.tZ)(j.Z,{type:"appear",children:(0,E.tZ)("button",{className:"site-indicator__button",onClick:this.toggleExpand,children:(0,E.tZ)(r.Z,{icon:this.getIcon(),size:16})})}),this.state.expand&&(0,E.BX)("div",{className:"site-indicator__message",children:[(0,E.tZ)("div",{className:"site-indicator__action",children:this.getText()}),(0,E.tZ)("button",{className:"site-indicator__button",onClick:this.toggleExpand,children:(0,E.tZ)(j.Z,{type:"appear",children:(0,E.tZ)(r.Z,{icon:"cross",size:18})})})]})]})}render(){const{site:e,siteIsJetpack:t}=this.props;return(0,E.BX)("div",{className:"site-indicator__wrapper",children:[t&&(0,E.tZ)(_.Z,{siteId:e.ID}),this.showIndicator()&&this.renderIndicator()]})}}const D=(0,m.$j)(((e,{site:t})=>({siteIsConnected:t&&(0,y.Z)(e,t.ID),siteIsJetpack:t&&(0,I.Z)(e,t.ID),siteIsAutomatedTransfer:t&&(0,k.Z)(e,t.ID),siteUpdates:t&&S(e,t.ID),userCanManage:t&&(0,b.i)(e,t.ID,"manage_options")})),{recordGoogleEvent:x.yt,recordTracksEvent:x.jN,trackSiteDisconnect:()=>(0,v.N)((0,x.yt)("Jetpack","Clicked in site indicator to start Jetpack Disconnect flow"),(0,x.jN)("calypso_jetpack_site_indicator_disconnect_start"))})((0,l.Z)(C));var N=s("./state/selectors/is-site-p2-hub.js"),P=s("./state/selectors/is-site-wpforteams.js"),L=s("./state/selectors/is-unlaunched-site.js"),T=s("./state/sites/selectors/get-site.js"),q=s("./state/sites/selectors/is-site-previewable.js"),z=s("./state/sites/selectors/get-site-slug.js"),R=s("./state/sites/selectors/get-site-option.ts");const A=()=>{};class $ extends u.Component{constructor(...e){super(...e),(0,i.Z)(this,"onSelect",(e=>{this.props.onSelect(e,this.props.site.ID)})),(0,i.Z)(this,"onMouseEnter",(e=>{this.props.onMouseEnter(e,this.props.site.ID)})),(0,i.Z)(this,"onMouseLeave",(e=>{this.props.onMouseLeave(e,this.props.site.ID)})),(0,i.Z)(this,"onViewSiteClick",(e=>{const{isPreviewable:t,siteSlug:s}=this.props;return t?e.altKey||e.ctrlKey||e.metaKey||e.shiftKey?(this.props.recordTracksEvent("calypso_mysites_sidebar_view_site_modifier_clicked"),void this.props.recordGoogleEvent("Sidebar","Clicked View Site | Modifier Key")):(e.preventDefault(),this.props.recordTracksEvent("calypso_mysites_sidebar_view_site_clicked"),this.props.recordGoogleEvent("Sidebar","Clicked View Site | Calypso"),void p()("/view/"+s)):(this.props.recordTracksEvent("calypso_mysites_sidebar_view_site_unpreviewable_clicked"),void this.props.recordGoogleEvent("Sidebar","Clicked View Site | Unpreviewable"))})),(0,i.Z)(this,"renderSiteDomain",(()=>{const{site:e,homeLink:t,translate:s}=this.props;return(0,E.BX)("div",{className:"site__domain",children:[(0,g.Z)()&&t&&s("View %(domain)s",{args:{domain:e.domain}}),(!(0,g.Z)()||!t)&&e.domain]})}))}render(){const{isSiteUnlaunched:e,site:t,translate:s,isAtomicAndEditingToolkitDeactivated:i}=this.props;if(!t)return null;const a=c()({site:!0,"is-jetpack":t.jetpack,"is-primary":t.primary,"is-private":t.is_private,"is-redirect":t.options&&t.options.is_redirect,"is-selected":this.props.isSelected,"is-highlighted":this.props.isHighlighted,"is-compact":this.props.compact,"is-reskinned":this.props.isReskinned}),l=!t.is_private&&this.props.site.is_coming_soon&&!i,d=t.is_private&&e,p=this.props.site.is_coming_soon||d;return(0,E.BX)("div",{className:a,children:[(0,E.BX)("a",{className:"site__content",href:this.props.homeLink?t.URL:this.props.href,"data-tip-target":this.props.tipTarget,target:this.props.externalLink&&"_blank",title:this.props.homeLink?s("View %(domain)s",{args:{domain:t.domain}}):t.domain,onClick:this.props.homeLink?this.onViewSiteClick:this.onSelect,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,"aria-label":this.props.homeLink?s("View %(domain)s",{args:{domain:t.domain}}):t.domain,children:[(0,E.tZ)(h.Z,{defaultIcon:this.props.isReskinned?o.Z:null,site:t,size:this.props.compact?24:this.props.isReskinned?50:32}),(0,E.BX)("div",{className:"site__info",children:[(0,E.tZ)("div",{className:"site__title",children:t.title}),!this.props.isReskinned&&this.renderSiteDomain(),this.props.isSiteP2&&!this.props.isP2Hub&&(0,E.tZ)("span",{className:"site__badge is-p2",children:"P2"}),this.props.isP2Hub&&(0,E.tZ)("span",{className:"site__badge is-p2-workspace",children:"P2 Workspace"}),this.props.site.is_private&&(0,E.tZ)("span",{className:"site__badge site__badge-private",children:s(p?"Coming Soon":"Private")}),t.options&&t.options.is_difm_lite_in_progress&&(0,E.tZ)("span",{className:"site__badge site__badge-domain-only",children:s("Built By Express")}),l&&(0,E.tZ)("span",{className:"site__badge site__badge-coming-soon",children:s("Coming Soon")}),t.options&&t.options.is_redirect&&(0,E.tZ)("span",{className:"site__badge site__badge-redirect",children:s("Redirect")}),t.options&&t.options.is_domain_only&&(0,E.tZ)("span",{className:"site__badge site__badge-domain-only",children:s("Domain")}),this.props.isReskinned&&this.renderSiteDomain()]}),this.props.homeLink&&this.props.showHomeIcon&&(0,E.tZ)("span",{className:"site__home",children:(0,E.tZ)(r.Z,{icon:"house",size:18})})]}),this.props.indicator&&(0,n._k)("site-indicator")?(0,E.tZ)(D,{site:t}):null]})}}(0,i.Z)($,"defaultProps",{onSelect:A,onMouseEnter:A,onMouseLeave:A,href:null,indicator:!0,isSelected:!1,homeLink:!1,showHomeIcon:!0,compact:!1,isP2Hub:!1,isSiteP2:!1,isReskinned:!1});const G=(0,m.$j)((function(e,t){const s=t.siteId||t.site.ID;return{siteId:s,site:s?(0,T.Z)(e,s):t.site,isPreviewable:(0,q.Z)(e,s),siteSlug:(0,z.Z)(e,s),isSiteUnlaunched:(0,L.Z)(e,s),isSiteP2:(0,P.Z)(e,s),isP2Hub:(0,N.Z)(e,s),isAtomicAndEditingToolkitDeactivated:(0,k.Z)(e,s)&&!1===(0,R.Z)(e,s,"editing_toolkit_is_active")}}),{recordGoogleEvent:x.yt,recordTracksEvent:x.jN})((0,l.Z)($))},"./components/animate/index.jsx":(e,t,s)=>{s.d(t,{Z:()=>n});var i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const n=({type:e,children:t})=>(0,i.tZ)("div",{className:`animate__${e}`,children:t})},"./components/data/query-site-connection-status/index.jsx":(e,t,s)=>{s.d(t,{Z:()=>d});var i=s("../node_modules/prop-types/index.js"),n=s.n(i),r=s("../node_modules/react/index.js"),o=s("../node_modules/react-redux/es/index.js");s("./state/site-connection/init.js");var a=s("./lib/wp/browser.js"),c=s("./state/action-types.ts");const l=e=>(t,s)=>{e&&!function(e,t){return e.siteConnection.requesting[t]??!1}(s(),e)&&t((e=>t=>(t({type:c.U5d,siteId:e}),a.Z.req.get(`/jetpack-blogs/${e}/test-connection`).then((s=>{t({type:c.tvw,siteId:e,status:s.connected}),t({type:c.D5g,siteId:e})})).catch((s=>{t({type:c.QLz,siteId:e,error:s})}))))(e))};function d({siteId:e}){const t=(0,o.I0)();return(0,r.useEffect)((()=>{t(l(e))}),[t,e]),null}d.propTypes={siteId:n().number.isRequired}},"./components/external-link/index.jsx":(e,t,s)=>{s.d(t,{Z:()=>h});var i=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("../packages/components/src/gridicon/index.tsx"),r=s("../packages/components/src/screen-reader-text/index.js"),o=s("../packages/i18n-utils/src/localize-url.tsx"),a=s("../node_modules/classnames/index.js"),c=s.n(a),l=s("../packages/i18n-calypso/src/index.js"),d=s("../node_modules/lodash-es/omit.js"),p=s("../node_modules/react/index.js"),u=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class m extends p.Component{render(){const e=c()("external-link",this.props.className,{"icon-first":this.props.showIconFirst,"has-icon":this.props.icon}),t={...(0,d.Z)(this.props,"icon","iconSize","showIconFirst","iconClassName","iconComponent"),className:e,rel:"external"};this.props.icon&&(t.target="_blank"),t.target&&(t.rel=t.rel.concat(" noopener noreferrer")),t.href&&(t.href=(0,o.aq)(t.href));const s=this.props.iconComponent||(0,u.tZ)(n.Z,{className:this.props.iconClassName,icon:"external",size:this.props.iconSize});return(0,u.BX)("a",{...t,children:[this.props.icon&&this.props.showIconFirst&&s,this.props.children,this.props.icon&&!this.props.showIconFirst&&s,this.props.icon&&(0,u.tZ)(r.Z,{children:(0,l.Iu)("(opens in a new tab)",{comment:"accessibility label for an external link"})})]})}}(0,i.Z)(m,"defaultProps",{iconSize:18,showIconFirst:!1,iconComponent:null});const h=m},"./components/image-preloader/index.tsx":(e,t,s)=>{s.d(t,{Z:()=>a});var i,n=s("../node_modules/react/index.js"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");!function(e){e[e.PENDING=0]="PENDING",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e[e.FAILED=3]="FAILED"}(i||(i={}));const o=()=>{};function a(e){const{children:t,src:s,placeholder:a,onLoad:c,onError:l,...d}=e,[p,u]=(0,n.useState)(i.PENDING),m=(0,n.useRef)(null),h=(0,n.useRef)(c),g=(0,n.useRef)(l);let Z;switch((0,n.useEffect)((()=>{h.current=c,g.current=l}),[l,c]),(0,n.useEffect)((()=>{if(u(i.LOADING),s)return m.current=new Image,m.current.src=s,m.current.onload=t,m.current.onerror=t,e;function e(){m.current&&(m.current.onload=o,m.current.onerror=o,m.current=null)}function t(t){if(e(),!t||"load"!==t.type)return u(i.FAILED),void(g.current&&g.current(t));u(i.LOADED),h.current&&h.current(t)}}),[s]),p){case i.LOADING:Z=a;break;case i.LOADED:Z=(0,r.tZ)("img",{src:s,...d});break;case i.FAILED:Z=t}return(0,r.tZ)("div",{className:"image-preloader",children:Z})}},"./components/image/index.tsx":(e,t,s)=>{s.d(t,{Z:()=>a});var i=s("../node_modules/classnames/index.js"),n=s.n(i),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const o=e=>{e.currentTarget.style.display="none"};function a({alt:e,className:t,src:s,...i}){return(0,r.tZ)("img",{src:s,onError:o,className:n()(t,"image"),alt:e,...i})}},"./lib/get-atomic-site-media/index.js":(e,t,s)=>{s.d(t,{y:()=>n});var i=s("./lib/wp/browser.js");function n(e,t,s){let n=0;const r=()=>function(e,t,{query:s="",maxSize:n}){const r={path:`/sites/${e}/atomic-auth-proxy/file?path=${t}&${s.replace(/^\?/,"")}`,apiNamespace:"wpcom/v2"};return new Promise(((e,t)=>{const s=()=>i.Z.req.get({...r,responseType:"blob"},((s,i)=>{!s&&i instanceof globalThis.Blob?e(i):t(s)}));return n?i.Z.req.get({...r,method:"HEAD"},((e,i,r)=>{r["Content-Length"]>n?t({message:"exceeded_max_size"}):s()})):s()}))}(e,t,s).catch((e=>n<3?new Promise((e=>{++n,setTimeout((()=>{e(r())}),n*n*1e3/2)})):Promise.reject(e)));return r()}},"./lib/media/utils/media-url-to-proxy-config.js":(e,t,s)=>{s.d(t,{p:()=>n});var i=s("../packages/calypso-url/src/url-parts.ts");function n(e,t){const{pathname:s,search:n,protocol:r,hostname:o}=(0,i.A)(e);let a=s,c=!0;if(-1===["http:","https:"].indexOf(r))c=!1;else if(o!==t&&(c=!1,/^i[0-2]\.wp\.com$/.test(o))){const[e,...s]=a.substr(1).split("/");a="/"+s.join("/"),e===t&&(c=!0)}return{query:n,filePath:a,isRelativeToSiteRoot:c}}},"./lib/resize-image-url/index.js":(e,t,s)=>{s.d(t,{Z:()=>p});var i=s("../packages/calypso-url/src/url-parts.ts"),n=s("../packages/calypso-url/src/safe-image-url/index.ts"),r=s("../node_modules/lodash-es/mapValues.js");const o=/^https?:$/,a="undefined"!=typeof window&&window?.devicePixelRatio>1?2:1,c=["w","h","resize","fit","s"],l={photon:/(^[is]\d\.wp\.com|(^|\.)wordpress\.com)$/,gravatar:/(^|\.)gravatar\.com$/},d=e=>e*a;function p(e,t,s,a=!0){if("string"!=typeof e)return e;const{search:u,...m}=(0,i.A)(e);if(!o.test(m.protocol))return e;if(!m.hostname)return e;c.forEach((e=>m.searchParams.delete(e)));const h=Object.keys(l).find((e=>m.hostname.match(l[e])));if("number"==typeof t&&(t="gravatar"===h?{s:t}:s>0?{fit:[t,s].join()}:{w:t}),!h&&a)return p((0,n.F)(e),t,null,!1);const g=(0,r.Z)(t,((e,t)=>"resize"===t||"fit"===t?e.split(",").map(d).join(","):c.includes(t)?d(e):e));for(const e of Object.keys(g))m.searchParams.set(e,g[e]);return(0,i.C)(m).href}},"./my-sites/media-library/media-file.tsx":(e,t,s)=>{s.d(t,{Z:()=>f});var i=s("../node_modules/react/index.js"),n=s("../node_modules/react-redux/es/index.js"),r=s("./lib/media/utils/media-url-to-proxy-config.js"),o=s("./state/selectors/is-private-site.ts"),a=s("./state/selectors/is-site-automated-transfer.ts"),c=s("./state/ui/selectors/get-selected-site-id.js"),l=s("./state/ui/selectors/get-selected-site-slug.js"),d=s("../node_modules/debug/src/browser.js"),p=s.n(d),u=s("./lib/get-atomic-site-media/index.js"),m=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const h=p()("calypso:my-sites:media-library:proxied-image"),g={},Z=function({siteSlug:e,filePath:t,query:s,placeholder:n,maxSize:r,onError:o,component:a,...c}){const[l,d]=(0,i.useState)("");return(0,i.useEffect)((()=>{const i=`media-library-proxied-image-${e}${t}${s}`;if(g[i]){const e=URL.createObjectURL(g[i]);d(e),h("set image from cache",{url:e})}else{h("requesting image from API",{requestId:i,imageObjectUrl:l});const n={query:s,...null!==r?{maxSize:r}:{}};(0,u.y)(e,t,n).then((e=>{((e,t,s=6e4)=>{const i=Object.keys(g);i.length>100&&delete g[i[0]],g[e]=t,setTimeout((()=>{delete g[e]}),s)})(i,e),d(URL.createObjectURL(e)),h("got image from API",{requestId:i,imageObjectUrl:l,data:e})})).catch(o)}return()=>{l&&(h("Cleared blob from memory on dismount: "+l),URL.revokeObjectURL(l))}}),[e,t,s]),l?(0,m.tZ)(a,{src:l,...c}):n};Z.defaultProps={placeholder:null};const j=Z,_=function({src:e,query:t,filePath:s,siteSlug:i,useProxy:n=!1,placeholder:r=null,maxSize:o,dispatch:a,component:c,proxiedComponent:l,...d}){return n?(0,m.tZ)(j,{siteSlug:i,filePath:s,query:t,component:l||c,placeholder:r,maxSize:o,...d}):(0,m.tZ)(c,{src:e,...d})};_.defaultProps={placeholder:null,component:"img"};const f=(0,n.$j)(((e,{src:t})=>{const s=(0,c.Z)(e),i=(0,l.Z)(e),n=!!(0,a.Z)(e,s),d=!!(0,o.Z)(e,s??0),{filePath:p,query:u,isRelativeToSiteRoot:m}=(0,r.p)(t,i);return{query:u,siteSlug:i,useProxy:n&&d&&p&&m,filePath:p}}))(_)},"./my-sites/media-library/media-image.tsx":(e,t,s)=>{s.d(t,{Z:()=>a});var i=s("./components/image-preloader/index.tsx"),n=s("./my-sites/media-library/media-file.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o(e){const t=e.component;return"img"===t&&e.placeholder?(0,r.tZ)(n.Z,{...e,component:i.Z}):(0,r.tZ)(n.Z,{...e,component:t})}o.defaultProps={component:"img",proxiedComponent:"img"};const a=o},"./state/analytics/actions/compose-analytics.js":(e,t,s)=>{s.d(t,{N:()=>o});var i=s("../node_modules/lodash-es/flatMap.js"),n=s("../node_modules/lodash-es/property.js"),r=s("./state/action-types.ts");function o(...e){return{type:r.y$E,meta:{analytics:(0,i.Z)(e,(0,n.Z)("meta.analytics"))}}}},"./state/selectors/get-media-item.js":(e,t,s)=>{s.d(t,{Z:()=>n});s("./state/media/init.js");var i=s("./state/selectors/get-media-query-manager.js");function n(e,t,s){const n=function(e,t,s){return e?.media?.transientItems?.[t]?.transientItems?.[s]}(e,t,s);if(null!=n)return n;const r=function(e,t,s){return e?.media?.transientItems?.[t]?.transientIdsToServerIds?.[s]}(e,t,s)??s,o=(0,i.Z)(e,t);if(!o)return null;const a=o.getItem(r)||null;return null===a?null:a.URL?a:null}},"./state/selectors/get-media-query-manager.js":(e,t,s)=>{s.d(t,{Z:()=>i});s("./state/media/init.js");function i(e,t){return e.media?.queries?.[t]??null}},"./state/selectors/get-site-connection-status.js":(e,t,s)=>{s.d(t,{Z:()=>i});s("./state/site-connection/init.js");function i(e,t){return e.siteConnection.items[t]??null}},"./state/selectors/get-site-icon-id.js":(e,t,s)=>{s.d(t,{Z:()=>r});var i=s("./state/selectors/get-raw-site.ts"),n=s("./state/site-settings/selectors.js");function r(e,t){const s=(0,i.Z)(e,t);if(s)return s.icon?.media_id??null;const r=(0,n.$1)(e,t);return r?r.site_icon:null}},"./state/selectors/get-site-icon-url.js":(e,t,s)=>{s.d(t,{Z:()=>a});var i=s("../packages/calypso-url/src/safe-image-url/index.ts"),n=s("./state/selectors/get-media-item.js");var r=s("./state/selectors/get-raw-site.ts"),o=s("./state/selectors/get-site-icon-id.js");function a(e,t){const s=function(e,t,s){const r=(0,n.Z)(e,t,s);return r?(0,i.F)(r.URL):null}(e,t,(0,o.Z)(e,t));return s||((0,r.Z)(e,t)?.icon?.img??null)}},"./state/selectors/get-sites.js":(e,t,s)=>{s.d(t,{Z:()=>l});var i=s("../packages/state-utils/src/index.ts"),n=s("../node_modules/lodash-es/sortBy.js"),r=s("../node_modules/lodash-es/partition.js"),o=s("./state/selectors/get-primary-site-id.js"),a=s("./state/selectors/get-sites-items.ts"),c=s("./state/sites/selectors/get-site.js");const l=(0,i.P1)(((e,t=!0)=>{const s=(0,o.Z)(e),[i,l]=(0,r.Z)((0,a.Z)(e),{ID:s});var d;return[...i,...t?(d=l,(0,n.Z)(d,["name","URL"])):l].map((t=>(0,c.Z)(e,t.ID)))}),(e=>[(0,a.Z)(e),e.currentUser.capabilities]))},"./state/selectors/is-private-site.ts":(e,t,s)=>{s.d(t,{Z:()=>r});var i=s("./state/selectors/get-raw-site.ts"),n=s("./state/site-settings/selectors.js");function r(e,t){const s=(0,i.Z)(e,t);if(s)return s.is_private??null;const r=(0,n.$1)(e,t);return r?-1===parseInt(String(r.blog_public??0),10):null}},"./state/selectors/is-site-p2-hub.js":(e,t,s)=>{s.d(t,{Z:()=>r});var i=s("../node_modules/lodash-es/get.js"),n=s("./state/selectors/is-site-wpforteams.js");function r(e,t){return!!(0,n.Z)(e,t)&&t===(0,i.Z)(e,["sites","items",t,"options","p2_hub_blog_id"],!1)}},"./state/selectors/is-unlaunched-site.js":(e,t,s)=>{s.d(t,{Z:()=>n});var i=s("./state/selectors/get-raw-site.ts");function n(e,t){return"unlaunched"===(0,i.Z)(e,t)?.launch_status}},"./state/site-connection/init.js":(e,t,s)=>{var i=s("./state/redux-store.ts"),n=s("./state/action-types.ts"),r=s("./state/utils/reducer-utils.ts");const o=e=>(t,{siteId:s})=>({...t,[s]:e}),a=(0,r.U)({items:(e={},t)=>{if(t.type===n.tvw){const{siteId:s,status:i}=t;return{...e,[s]:i}}return e},requesting:(e={},t)=>{switch(t.type){case n.U5d:return o(!0)(e,t);case n.QLz:case n.D5g:return o(!1)(e,t)}return e}});(0,i.x)(["siteConnection"],a)},"./state/site-settings/init.js":(e,t,s)=>{var i=s("./state/redux-store.ts"),n=s("../packages/state-utils/src/index.ts"),r=s("../node_modules/lodash-es/includes.js"),o=s("./state/action-types.ts"),a=s("./state/utils/schema-utils.js"),c=s("./state/utils/reducer-utils.ts");const l=(0,a.G)({type:"object",additionalProperties:!1,patternProperties:{"^\\d+$":{type:"object"}}},((e={},t)=>{switch(t.type){case o.KBY:{const{siteId:s,settings:i}=t;return{...e,[s]:i}}case o.rZJ:{const{siteId:s,settings:i}=t;return{...e,[s]:{...e[s],...i}}}case o.aqr:{const{siteId:s,mediaIds:i}=t,n=e[s];return n&&(0,r.Z)(i,n.site_icon)?{...e,[s]:{...n,site_icon:null}}:e}}return e})),d=(0,c.U)({items:l,requesting:(e={},t)=>{switch(t.type){case o.qjt:{const{siteId:s}=t;return{...e,[s]:!0}}case o.zVc:{const{siteId:s}=t;return{...e,[s]:!1}}case o.cv:{const{siteId:s}=t;return{...e,[s]:!1}}}return e},saveRequests:(e={},t)=>{switch(t.type){case o.Y8Y:{const{siteId:s}=t;return{...e,[s]:{saving:!0,status:"pending",error:!1}}}case o.suc:{const{siteId:s}=t;return{...e,[s]:{saving:!1,status:"success",error:!1}}}case o.paJ:{const{siteId:s,error:i}=t;return{...e,[s]:{saving:!1,status:"error",error:i}}}}return e}}),p=(0,n.xi)("siteSettings",d);(0,i.x)(["siteSettings"],p)},"./state/site-settings/selectors.js":(e,t,s)=>{s.d(t,{sq:()=>n,yG:()=>r,$1:()=>o,kM:()=>a,OV:()=>c});var i=s("../node_modules/lodash-es/get.js");s("./state/site-settings/init.js");function n(e,t){return(0,i.Z)(e.siteSettings.requesting,[t],!1)}function r(e,t){return(0,i.Z)(e.siteSettings.saveRequests,[t,"saving"],!1)}function o(e,t){return(0,i.Z)(e.siteSettings.items,[t],null)}function a(e,t){return"success"===function(e,t){return(0,i.Z)(e.siteSettings.saveRequests,[t,"status"])}(e,t)}function c(e,t){return(0,i.Z)(e.siteSettings.saveRequests,[t,"error"],!1)}},"./state/sites/selectors/is-site-previewable.js":(e,t,s)=>{s.d(t,{Z:()=>o});var i=s("./sections-filter.js"),n=s("./state/selectors/get-raw-site.ts"),r=s("./state/sites/selectors/get-site-option.ts");function o(e,t){const s=(0,n.Z)(e,t);if(!s)return null;if(s.is_vip)return!1;if(!(0,i.e)("preview"))return!1;if((0,r.Z)(e,t,"is_wpforteams_site"))return!1;const o=(0,r.Z)(e,t,"unmapped_url");return!!o&&(!!(a=o)&&a.startsWith("https://"));var a}},"./state/ui/selectors/get-selected-site-slug.js":(e,t,s)=>{s.d(t,{Z:()=>r});var i=s("./state/sites/selectors/get-site-slug.js"),n=s("./state/ui/selectors/get-selected-site-id.js");function r(e){const t=(0,n.Z)(e);return t?(0,i.Z)(e,t):null}},"../packages/components/src/screen-reader-text/index.js":(e,t,s)=>{s.d(t,{Z:()=>n});var i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function n({children:e}){return(0,i.tZ)("span",{className:"screen-reader-text",children:e})}}}]);