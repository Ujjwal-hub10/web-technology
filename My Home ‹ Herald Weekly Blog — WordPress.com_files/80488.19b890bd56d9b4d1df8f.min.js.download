"use strict";(globalThis.webpackChunkcalypso=globalThis.webpackChunkcalypso||[]).push([[80488],{"./blocks/site/placeholder.jsx":(e,t,s)=>{s.d(t,{Z:()=>l});var i=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("../node_modules/debug/src/browser.js"),o=s.n(n),a=s("../node_modules/react/index.js"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const c=o()("calypso:my-sites:site");class l extends a.Component{componentDidMount(){c("The Site component is mounted.")}render(){return(0,r.tZ)("div",{className:"site is-loading",children:(0,r.BX)("div",{className:"site__content",children:[(0,r.tZ)("div",{className:"site-icon"}),(0,r.BX)("div",{className:"site__info",children:[(0,r.tZ)("div",{className:"site__title",children:"This is an example"}),(0,r.tZ)("div",{className:"site__domain",children:"example.wordpress.com"})]})]})})}}(0,i.Z)(l,"displayName","SitePlaceholder")},"./blocks/visit-site/index.jsx":(e,t,s)=>{s.d(t,{Z:()=>r});var i=s("../packages/i18n-calypso/src/use-translate.js"),n=s("../node_modules/react/index.js"),o=s("./lib/wp/browser.js"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r({siteSlug:e}){const t=(0,i.Z)(),s=function(e){const[t,s]=(0,n.useState)(null);return(0,n.useEffect)((()=>{o.Z.site(e).get({apiVersion:"1.2"}).then(s)}),[e]),t}(e);if(!s)return null;const r=(0,a.tZ)("a",{href:s.URL,children:e.replace("::","/")});return(0,a.tZ)("div",{className:"visit-site",children:t("or visit {{siteLink/}}",{components:{siteLink:r},context:"Alternative link under login/site-selection header, leads to site frontend."})})}},"./components/close-on-escape/index.jsx":(e,t,s)=>{s.d(t,{Z:()=>l});var i=s("../node_modules/react/index.js");let n=[];function o(e){if(n.length&&27===e.keyCode&&(t=e.target,!["INPUT","TEXTAREA"].includes(t.nodeName))){n[n.length-1].onEscape()}var t}function a(e,t){n.push({component:e,onEscape:t}),n.length&&document.addEventListener("keydown",o,!0)}function r(e){n=n.filter((t=>t.component!==e)),n.length||document.removeEventListener("keydown",o,!0)}class c extends i.Component{componentDidMount(){a(this,this.props.onEscape)}componentWillUnmount(){r(this)}render(){return null}}c.defaultProps={onEscape:()=>{}};const l=c},"./components/data/query-site-domains/index.jsx":(e,t,s)=>{s.d(t,{Z:()=>l});var i=s("../node_modules/prop-types/index.js"),n=s.n(i),o=s("../node_modules/react/index.js"),a=s("../node_modules/react-redux/es/index.js"),r=s("./state/sites/domains/actions.js"),c=s("./state/sites/domains/selectors.js");function l({siteId:e}){const t=(0,a.I0)();return(0,o.useEffect)((()=>{t((e=>(t,s)=>{e&&!(0,c.JZ)(s(),e)&&t((0,r.Pz)(e))})(e))}),[t,e]),null}l.propTypes={siteId:n().number.isRequired}},"./components/empty-component/index.jsx":(e,t,s)=>{s.d(t,{Z:()=>n});var i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const n=()=>(0,i.tZ)("div",{})},"./components/empty-content/no-sites-message/index.jsx":(e,t,s)=>{s.d(t,{Z:()=>r});var i=s("../packages/i18n-calypso/src/localize.js"),n=s("./components/empty-content/index.jsx"),o=s("./lib/paths/index.js"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const r=(0,i.Z)((({translate:e})=>(0,a.tZ)(n.Z,{className:"no-sites-message",title:e("You don't have any WordPress sites yet."),line:e("Would you like to start one?"),action:e("Create Site"),actionURL:(0,o.Nf)()+"?ref=calypso-nosites",illustration:"/calypso/images/illustrations/illustration-nosites.svg"})))},"./components/main/index.jsx":(e,t,s)=>{s.d(t,{Z:()=>a});var i=s("../node_modules/classnames/index.js"),n=s.n(i),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a({className:e="",id:t="",children:s,wideLayout:i=!1,fullWidthLayout:a=!1,isLoggedOut:r=!1}){const c=n()(e,"main",{"is-wide-layout":i,"is-full-width-layout":a,"is-logged-out":r});return(0,o.tZ)("main",{className:c,id:t||null,role:"main",children:s})}},"./components/search/index.jsx":(e,t,s)=>{s.d(t,{J:()=>b,ZP:()=>j});var i=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("../packages/components/src/spinner/index.tsx"),o=s("../packages/viewport/src/index.ts"),a=s("../node_modules/@wordpress/icons/build-module/icon/index.js"),r=s("../node_modules/@wordpress/icons/build-module/library/search.js"),c=s("../node_modules/@wordpress/icons/build-module/library/close-small.js"),l=s("../node_modules/classnames/index.js"),d=s.n(l),p=s("../packages/i18n-calypso/src/index.js"),u=s("../node_modules/lodash-es/debounce.js"),h=s("../node_modules/react/index.js"),m=s("../node_modules/uuid/dist/esm-browser/v4.js"),g=s("./components/forms/form-text-input/index.jsx"),y=(s("./components/translatable/proptype.js"),s("./lib/analytics/ga.js")),f=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const Z=()=>{},b="on-enter";function _(e,t){switch(t.key){case" ":case"Enter":this[e](t)}}class S extends h.Component{constructor(e){super(e),(0,i.Z)(this,"setOpenIconRef",(e=>this.openIcon=e)),(0,i.Z)(this,"setSearchInputRef",(e=>this.searchInput=e)),(0,i.Z)(this,"setOverlayRef",(e=>this.overlay=e)),(0,i.Z)(this,"scrollOverlay",(()=>{this.overlay&&window.requestAnimationFrame((()=>{this.overlay&&this.searchInput&&(this.overlay.scrollLeft=this.getScrollLeft(this.searchInput))}))})),(0,i.Z)(this,"getScrollLeft",(e=>{if(!e.createTextRange)return e.scrollLeft;const t=e.createTextRange(),s=window.getComputedStyle(e,void 0),i=parseFloat(s.paddingLeft),n=t.getBoundingClientRect();return e.getBoundingClientRect().left+e.clientLeft+i-n.left})),(0,i.Z)(this,"focus",(()=>{setTimeout((()=>this.searchInput&&this.searchInput.focus()),0)})),(0,i.Z)(this,"blur",(()=>this.searchInput.blur())),(0,i.Z)(this,"clear",(()=>this.setState({keyword:""}))),(0,i.Z)(this,"onBlur",(e=>{this.props.onBlur&&this.props.onBlur(e),this.setState({hasFocus:!1})})),(0,i.Z)(this,"onChange",(e=>{this.setState({keyword:e.target.value})})),(0,i.Z)(this,"openSearch",(e=>{e.preventDefault(),this.setState({keyword:"",isOpen:!0}),(0,y.Yh)(this.props.analyticsGroup,"Clicked Open Search")})),(0,i.Z)(this,"closeSearch",(e=>{e.preventDefault(),this.props.disabled||(this.setState({keyword:"",isOpen:this.props.isOpen||!1}),this.searchInput.value="",this.props.pinned?(this.searchInput.blur(),this.openIcon.focus()):this.searchInput.focus(),this.props.onSearchClose(e),(0,y.Yh)(this.props.analyticsGroup,"Clicked Close Search"))})),(0,i.Z)(this,"keyUp",(e=>{"Enter"===e.key&&(0,o.tq)()&&this.blur(),this.props.pinned&&("Escape"===e.key&&this.closeSearch(e),this.scrollOverlay())})),(0,i.Z)(this,"keyDown",(e=>{this.scrollOverlay(),"Escape"===e.key&&""===e.target.value&&this.closeSearch(e),this.isSearchOnEnterMode()&&"Enter"===e.key&&this.updateSearch(),this.props.onKeyDown(e)})),(0,i.Z)(this,"onFocus",(()=>{if(!this.searchInput)return;const e=this.searchInput.value;e&&(this.searchInput.value="",this.searchInput.value=e),this.setState({hasFocus:!0}),this.props.onSearchOpen()})),(0,i.Z)(this,"updateSearch",(()=>{this.state.keyword?this.onSearch(this.state.keyword):(this.props.delaySearch&&this.onSearch.cancel(),this.props.onSearch(this.state.keyword))})),(0,i.Z)(this,"isSearchOnEnterMode",(()=>this.props.searchMode===b)),(0,i.Z)(this,"isSearchOnWriteMode",(()=>!this.isSearchOnEnterMode())),this.instanceId=(0,m.Z)(),this.state={keyword:e.initialValue||"",isOpen:!!e.isOpen,hasFocus:e.autoFocus},this.closeListener=_.bind(this,"closeSearch"),this.openListener=_.bind(this,"openSearch")}UNSAFE_componentWillReceiveProps(e){e.onSearch===this.props.onSearch&&e.delaySearch===this.props.delaySearch||(this.onSearch=this.props.delaySearch?(0,u.Z)(this.props.onSearch,this.props.delayTimeout):this.props.onSearch),this.props.isOpen!==e.isOpen&&this.setState({isOpen:e.isOpen}),this.props.value===e.value||!e.value&&""!==e.value||e.value===this.state.keyword||this.setState({keyword:e.value})}componentDidUpdate(e,t){this.scrollOverlay(),(this.state.isOpen&&!t.isOpen||this.props.autoFocus&&!e.autoFocus)&&this.focus(),this.state.keyword!==t.keyword&&((this.isSearchOnWriteMode()||""===this.state.keyword||this.props.applySearch)&&this.updateSearch(),this.props.onSearchChange(this.state.keyword))}componentDidMount(){this.onSearch=this.props.delaySearch?(0,u.Z)(this.props.onSearch,this.props.delayTimeout):this.props.onSearch}render(){const e=this.state.keyword,t=this.props.placeholder||p.ZP.translate("Search…",{textOnly:!0}),s=this.props.inputLabel,i=this.props.pinned&&!this.state.isOpen,o=this.state.isOpen||!this.props.pinned||this.props.initialValue,c=this.props.disableAutocorrect&&{autoComplete:"off",autoCorrect:"off",spellCheck:"false"},l=d()(this.props.additionalClasses,this.props.dir,{"is-expanded-to-container":this.props.fitsContainer,"is-open":o,"is-searching":this.props.searching,"is-compact":this.props.compact,"has-focus":!this.props.hideFocus&&this.state.hasFocus,"has-open-icon":!this.props.hideOpenIcon,search:!0}),u=d()("search__input-fade",this.props.dir),h=d()("search__input",this.props.dir);return(0,f.BX)("div",{dir:this.props.dir||null,className:l,role:"search",children:[(0,f.tZ)(n.$,{}),(0,f.tZ)("div",{role:"button",className:"search__icon-navigation",ref:this.setOpenIconRef,onClick:i?this.openSearch:this.focus,tabIndex:i?"0":null,onKeyDown:i?this.openListener:null,"aria-controls":"search-component-"+this.instanceId,"aria-label":p.ZP.translate("Open Search",{context:"button label"}),children:!this.props.hideOpenIcon&&(0,f.tZ)(a.Z,{icon:r.Z,className:"search__open-icon"})}),(0,f.BX)("div",{className:u,children:[(0,f.tZ)(g.Z,{type:"search",id:"search-component-"+this.instanceId,autoFocus:this.props.autoFocus,"aria-describedby":this.props.describedBy,"aria-label":s||p.ZP.translate("Search"),"aria-hidden":!o,className:h,placeholder:t,role:"searchbox",value:e,inputRef:this.setSearchInputRef,onChange:this.onChange,onKeyUp:this.keyUp,onKeyDown:this.keyDown,onMouseUp:this.props.onClick,onFocus:this.onFocus,onBlur:this.onBlur,disabled:this.props.disabled,autoCapitalize:"none",dir:this.props.dir,maxLength:this.props.maxLength,minLength:this.props.minLength,...c}),this.props.overlayStyling&&this.renderStylingDiv()]}),this.closeButton(),this.props.children]})}renderStylingDiv(){return(0,f.tZ)("div",{className:"search__text-overlay",ref:this.setOverlayRef,children:this.props.overlayStyling(this.state.keyword)})}closeButton(){return this.props.hideClose||!this.state.keyword&&!this.state.isOpen?null:(0,f.tZ)("div",{role:"button",className:"search__icon-navigation",onClick:this.closeSearch,tabIndex:"0",onKeyDown:this.closeListener,"aria-controls":"search-component-"+this.instanceId,"aria-label":p.ZP.translate("Close Search",{context:"button label"}),children:(0,f.tZ)(a.Z,{icon:c.Z,className:"search__close-icon"})})}}(0,i.Z)(S,"defaultProps",{pinned:!1,delaySearch:!1,delayTimeout:300,autoFocus:!1,disabled:!1,describedBy:null,onSearchChange:Z,onSearchOpen:Z,onSearchClose:Z,onKeyDown:Z,onClick:Z,overlayStyling:void 0,disableAutocorrect:!1,searching:!1,isOpen:!1,dir:void 0,fitsContainer:!1,hideClose:!1,hideFocus:!1,compact:!1,hideOpenIcon:!1,searchMode:"when-typing",applySearch:!1});const j=S},"./my-sites/controller.js":(e,t,s)=>{s.d(t,{os:()=>ze,tV:()=>nt,G:()=>rt,KT:()=>st,Gh:()=>pt,AN:()=>at,zK:()=>lt,gX:()=>Ke,cK:()=>ht,r5:()=>tt,tq:()=>it,tc:()=>ct,ow:()=>et,Uc:()=>ut,Sf:()=>dt});var i=s("../packages/calypso-config/src/index.ts"),n=s("../node_modules/@wordpress/url/build-module/remove-query-args.js"),o=s("../packages/i18n-calypso/src/index.js"),a=s("../node_modules/lodash-es/some.js"),r=s("../node_modules/lodash-es/startsWith.js"),c=s("../node_modules/page/page.js"),l=s.n(c),d=s("../node_modules/react/index.js"),p=s("./components/empty-content/index.jsx"),u=s("./components/empty-content/no-sites-message/index.jsx"),h=s("./controller/index.web.js"),m=s("./controller/shared.js"),g=s("./controller/web-util.js"),y=s("../packages/i18n-utils/src/utils.ts"),f=s("../packages/components/src/button/index.tsx"),Z=s("../packages/i18n-calypso/src/use-translate.js"),b=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const _=({siteSlug:e})=>{const t=(0,Z.Z)();return(0,b.BX)("div",{className:"no-jetpack-sites-message",children:[(0,b.tZ)("h2",{className:"no-jetpack-sites-message__header",children:t("Jetpack features are already part of WordPress.com")}),e&&(0,b.tZ)("p",{children:t("Your site, %(siteSlug)s, already has the power of Jetpack built in. Its features can be found within your WordPress.com dashboard.",{args:{siteSlug:e}})}),(0,b.tZ)("p",{children:t("This area is only for Jetpack customers with self-hosted WordPress sites.")}),(0,b.tZ)(f.Z,{primary:!0,href:"https://wordpress.com",rel:"noopener noreferrer",children:t("Visit Dashboard")})]})};var S=s("./lib/analytics/page-view.js"),j=s("./lib/route/path.ts"),x=s("./lib/url/add-query-args.ts"),v=s("./state/current-user/selectors.js"),k=s("./state/selectors/get-primary-site-id.js"),w=s("./state/sites/actions.js"),P=s("./state/sites/selectors/get-site-id.js"),I=s("./state/sites/selectors/get-site-slug.js"),N=s("./state/ui/actions/set-sites.js");const C=(e,t)=>{const{getState:s,dispatch:i}=e.store;return i((0,w.LV)(t)).catch((()=>null)).then((()=>({id:(0,P.Z)(s(),t),slug:(0,I.Z)(s(),t)})))},L=(e,t)=>{const{dispatch:s}=e.store;s((0,N.B)(t)),et(e)},B=(e,t)=>{const{getState:s,dispatch:i}=e.store,n=(0,v.ts)(s());if(1===n?.visible_site_count){const t=(0,k.Z)(s()),o=(0,I.Z)(s(),t);o?at(e,o):C(e,t).then((({slug:t})=>{t?at(e,t):tt(n,i)}))}else i((0,N._)()),t()};function O(e,t){const{getState:s}=t.store,i=(0,v.ts)(s());return 0===i?.jetpack_site_count?(((e,t)=>{(0,h.QS)({group:"sites"})(e),e.primary=(0,d.createElement)(_,{siteSlug:t}),(0,h.wx)(e,(()=>{})),(0,h.sY)(e)})(t,i.primarySiteSlug),function(e,t){(0,S.A)("/landing","No Jetpack Sites",{base_path:(0,j.n3)(e.path,t)})}(t,e),!0):0===i?.jetpack_visible_site_count?(Ke(t),function(e,t){(0,S.A)("/landing","All Jetpack Sites Hidden",{base_path:(0,j.n3)(e.path,t)})}(t,e),!0):void 0}async function D(e,t){const s=(e=>e.params.site||(0,j.lQ)(e.path)||void 0)(e);if(!O(s,e))if(s){const i=(0,y.aK)().join("|");if(new RegExp(`^(/(?:${i}))?/pricing`).test(e.path)){const{id:i}=await C(e,s);if(!i)return void await B(e,t)}await(async(e,t,s)=>{const{getState:i}=t.store,n=(0,P.Z)(i(),e);if(n)L(t,n),s();else{const{id:i}=await C(t,e);if(i)L(t,i),s();else if("1"===t.query.unlinked)s();else{const s=(0,x.Z)({site:e},(0,j.n3)(t.path,e));l().redirect(s)}}})(s,e,t)}else await B(e,t)}var T=s("./lib/analytics/page-view-tracker/index.jsx"),F=s("./lib/analytics/tracks.js"),R=s("./lib/jetpack/is-jetpack-cloud.ts"),A=s("./lib/navigate/index.ts"),E=s("./lib/paths/index.js"),$=s("./lib/route/trailingslashit.ts"),q=s("./lib/url/http-utils.ts"),U=s("./my-sites/domains/domain-management/list/domain-only.jsx"),W=s("./my-sites/domains/paths.js"),M=s("./my-sites/email/paths.js"),Y=s("../node_modules/react-redux/es/index.js"),H=s("./assets/images/difm/site-build-in-progress.svg"),X=s("./assets/images/difm/website-content-required.svg"),J=s("./components/data/query-site-domains/index.jsx"),V=s("./lib/gsuite/has-gsuite-with-us.ts"),z=s("./lib/titan/index.js"),K=s("./state/analytics/actions/record.js"),Q=s("./state/selectors/get-primary-domain-by-site-id.js"),G=s("./state/selectors/get-raw-site.ts");var ee=s("./state/sites/selectors/is-requesting-site.js"),te=s("./state/sites/selectors/is-requesting-sites.js");const se=function({siteId:e}){const t=(0,Y.v9)((t=>(0,I.Z)(t,e))),s=(0,Y.v9)((t=>(0,ee.Z)(t,e)||(0,te.Z)(t))),i=(0,Y.v9)((t=>function(e,t){if(!t)return!1;const s=(0,G.Z)(e,t);return!!s&&(s.options?.difm_lite_site_options?.is_website_content_submitted??!1)}(t,e))),n=(0,Y.v9)((t=>(0,Q.Z)(t,e))),o=(0,Z.Z)(),a=(0,Y.I0)();if(!n||s)return(0,b.BX)(b.HY,{children:[(0,b.tZ)(J.Z,{siteId:e}),(0,b.tZ)(p.Z,{className:"difm-lite-in-progress__site-placeholder",illustration:H,illustrationWidth:144})]});const r=(0,V.u)(n)||(0,z.zW)(n),c=n.name,l=()=>{const e=r?"calypso_difm_lite_in_progress_email_manage":"calypso_difm_lite_in_progress_email_cta";a((0,K.jN)(e,{domain:c}))};return i?(0,b.tZ)(p.Z,{title:o("Your content submission was successful!"),line:o("We are currently building your site and will send you an email when it's ready, within %d business days.{{br}}{{/br}}{{SupportLink}}Contact support{{/SupportLink}} if you have any questions.",{components:{br:(0,b.tZ)("br",{}),SupportLink:(0,b.tZ)("a",{href:`mailto:builtby+express@wordpress.com?subject=${encodeURIComponent(`I need help with my site: ${n.domain}`)}`})},args:[4]}),action:o("Manage domain"),actionURL:(0,W.Hf)(t),secondaryAction:o(r?"Manage email":"Add email"),secondaryActionURL:(0,M.Fb)(t,null),secondaryActionCallback:l,illustration:H,illustrationWidth:144,className:"difm-lite-in-progress__content"}):(0,b.tZ)(p.Z,{title:o("Website content not submitted"),line:o("Please provide the necessary information for the creation of your website. To access click on the button below.{{br}}{{/br}}{{SupportLink}}Contact support{{/SupportLink}} if you have any questions.",{components:{br:(0,b.tZ)("br",{}),SupportLink:(0,b.tZ)("a",{href:`mailto:builtby+express@wordpress.com?subject=${encodeURIComponent(`I need help with my site: ${n.domain}`)}`})}}),action:o("Add content to your website"),actionURL:`/start/site-content-collection/website-content?siteSlug=${t}`,secondaryActionCallback:l,illustration:X,illustrationWidth:144,className:"difm-lite-in-progress__content"})};var ie=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),ne=s("./components/async-load/index.jsx"),oe=s("../node_modules/react-click-outside/dist/index.js"),ae=s.n(oe),re=s("./components/close-on-escape/index.jsx"),ce=s("./components/site-selector/index.jsx"),le=s("./lib/touch-detect/index.js"),de=s("./state/sites/selectors/is-jetpack-site-pred.ts");function pe(e){return e?.options?.jetpack_connection_active_plugins}var ue=s("./state/ui/layout-focus/actions.js"),he=s("./state/ui/layout-focus/selectors.js");const me=(0,de.Z)({considerStandaloneProducts:(0,R.Z)()});class ge extends d.Component{constructor(...e){super(...e),(0,ie.Z)(this,"state",{isAutoFocused:!1,isRendered:"sites"===this.props.currentLayoutFocus}),(0,ie.Z)(this,"onClose",((e,t)=>{"Escape"===e.key?this.closePicker():(this.props.setNextLayoutFocus("sidebar"),t&&this.scrollToTop()),this.props.onClose(e,t)})),(0,ie.Z)(this,"scrollToTop",(()=>{document.getElementById("secondary").scrollTop=0,window.scrollTo(0,0)})),(0,ie.Z)(this,"closePicker",(e=>{"sites"===this.props.currentLayoutFocus&&(this.props.setLayoutFocus("sidebar"),e&&this.scrollToTop())})),(0,ie.Z)(this,"handleClickOutside",(()=>{this.closePicker(null)})),(0,ie.Z)(this,"filterSites",(e=>!pe(e)||me(e)))}UNSAFE_componentWillReceiveProps(e){if("sites"!==e.currentLayoutFocus||this.state.isRendered||this.setState({isRendered:!0}),!e.currentLayoutFocus||(0,le._)())return;const t="sites"===e.currentLayoutFocus;t!==this.state.isAutoFocused&&this.setState({isAutoFocused:t})}render(){return(0,b.BX)("div",{children:[(0,b.tZ)(re.Z,{onEscape:this.closePicker}),(0,b.tZ)(ce.Z,{maxResults:this.props.maxResults,showHiddenSites:this.props.showHiddenSites,showManageSitesButton:this.props.showManageSitesButton,isPlaceholder:!this.state.isRendered,indicator:!0,showAddNewSite:!0,showAllSites:!0,allSitesPath:this.props.allSitesPath,siteBasePath:this.props.siteBasePath,autoFocus:this.state.isAutoFocused,onClose:this.onClose,groups:!0,filter:this.filterSites})]})}}(0,ie.Z)(ge,"displayName","SitePicker"),(0,ie.Z)(ge,"defaultProps",{onClose:()=>{}});const ye=(0,Y.$j)((function(e){return{currentLayoutFocus:(0,he.d)(e)}}),{setNextLayoutFocus:ue.SB,setLayoutFocus:ue.Js})(ae()(ge));var fe=function(e){Promise.all([s.e(11341),s.e(52203),s.e(14445),s.e(19540),s.e(97144),s.e(37148)]).then(s.bind(s,"./components/jetpack/sidebar/index.jsx")).then((function(t){e(t.default)}))},Ze=function(e){Promise.all([s.e(52203),s.e(60650),s.e(65962),s.e(33999)]).then(s.bind(s,"./my-sites/sidebar/index.jsx")).then((function(t){e(t.default)}))};class be extends d.Component{constructor(...e){super(...e),(0,ie.Z)(this,"preventPickerDefault",(e=>{e.preventDefault(),e.stopPropagation()}))}render(){const e={placeholder:null,path:this.props.path,siteBasePath:this.props.siteBasePath};let t=null,s={};return i.ZP.isEnabled("jetpack-cloud")?(t=(0,b.tZ)(ne.Z,{require:fe,...e}),s={showManageSitesButton:!1,showHiddenSites:!1}):(t=(0,b.tZ)(ne.Z,{require:Ze,...e}),s={showManageSitesButton:!0,showHiddenSites:!0,maxResults:50}),(0,b.BX)("div",{children:[(0,b.tZ)(ye,{allSitesPath:this.props.allSitesPath,siteBasePath:this.props.siteBasePath,onClose:this.preventPickerDefault,...s}),t]})}}(0,ie.Z)(be,"displayName","MySitesNavigation");const _e=be;var Se=s("../packages/components/src/card/index.tsx"),je=s("../node_modules/classnames/index.js"),xe=s.n(je),ve=s("../packages/i18n-calypso/src/localize.js"),ke=s("./blocks/visit-site/index.jsx"),we=s("./components/data/document-head/index.jsx"),Pe=s("./components/main/index.jsx"),Ie=s("./state/selectors/get-sites.js"),Ne=s("./state/selectors/has-loaded-sites.js");const Ce=(0,de.Z)({considerStandaloneProducts:(0,R.Z)()});class Le extends d.Component{constructor(...e){super(...e),(0,ie.Z)(this,"filterSites",(e=>{if(pe(e)&&!Ce(e))return!1;const t=this.props.siteBasePath;return/^\/domains/.test(t)?!e.jetpack||e.options.is_automated_transfer:/^\/plans/.test(t)?!e.jetpack||e.capabilities.manage_options:/^\/hosting-config/.test(t)?!!e.capabilities.view_hosting:/^\/home/.test(t)?!e.is_vip:e}))}componentDidMount(){const e=this.getPath();this.props.fromSite&&e&&(0,F.recordTracksEvent)("calypso_site_selector_site_missing",{path:e,site:this.props.fromSite})}getPath(){let e=this.props.siteBasePath.split("?")[0].split("/")[1];return void 0!==e&&(e=e.toLowerCase()),e}getHeaderText(){if(this.props.getSiteSelectionHeaderText)return this.props.getSiteSelectionHeaderText();let e=this.getPath();const{translate:t}=this.props;if(["page","post","edit","block-editor"].includes(e))return t("Select a site to start writing");switch(e){case"activity-log":e=t("Activity");break;case"stats":e=t("Insights");break;case"plans":e=t("Plans");break;case"media":e=t("Media");break;case"sharing":e=t("Sharing");break;case"people":e=t("Users");break;case"domains":e=t("Domains");break;case"settings":e=t("Settings");break;case"home":e=t("My Home");break;case"hosting-config":e=t("Hosting Configuration");break;case"jetpack-search":e="Jetpack Search"}return t("Select a site to open {{strong}}%(path)s{{/strong}}",{args:{path:e},components:{strong:(0,b.tZ)("strong",{})}})}render(){const{clearPageTitle:e,fromSite:t,siteBasePath:s,sites:i,translate:n,hasFetchedSites:o}=this.props,a=i.filter(this.filterSites),r=(0,R.Z)()&&o&&!a.length;return(0,b.BX)(b.HY,{children:[e&&(0,b.tZ)(we.Z,{title:""}),(0,b.tZ)(Pe.Z,{className:xe()("sites",{"sites__main-empty":r}),children:r?(0,b.BX)("div",{className:"sites__empty-state",children:[(0,b.tZ)("h1",{className:"card-heading-36",children:n("Add a site")}),(0,b.tZ)("p",{children:n("It looks like you don’t have any connected Jetpack sites to manage.")}),(0,b.tZ)(f.Z,{primary:!0,target:"_blank",href:"https://jetpack.com/support/jetpack-agency-licensing-portal-instructions/add-sites-agency-portal-dashboard/",children:n("Learn how to add a site")})]}):(0,b.BX)(b.HY,{children:[(0,b.BX)("div",{className:"sites__select-header",children:[(0,b.tZ)("h2",{className:"sites__select-heading",children:this.getHeaderText()}),t&&(0,b.tZ)(ke.Z,{siteSlug:t})]}),(0,b.tZ)(Se.Z,{className:"sites__select-wrapper",children:(0,b.tZ)(ce.Z,{filter:this.filterSites,siteBasePath:s,groups:!0})})]})})]})}}const Be=(0,Y.$j)((e=>({hasFetchedSites:(0,Ne.Z)(e),sites:(0,Ie.Z)(e,!1)})))((0,ve.Z)(Le));var Oe=s("./state/notices/actions.ts"),De=s("./state/preferences/actions.js"),Te=s("./state/preferences/selectors.js"),Fe=s("./state/selectors/get-p2-hub-blog-id.js");var Re=s("./state/selectors/is-domain-only-site.js"),Ae=s("./state/selectors/is-site-migration-in-progress.js"),Ee=s("./state/selectors/is-site-p2-hub.js"),$e=s("./state/selectors/is-site-wpforteams.js"),qe=s("./state/sites/domains/selectors.js"),Ue=s("./state/sites/selectors/get-site.js"),We=s("./state/sites/selectors/get-site-option.ts"),Me=s("./state/support/selectors.js"),Ye=s("./state/ui/selectors/get-selected-site.ts"),He=s("./state/ui/selectors/get-selected-site-id.js");const Xe=e=>({getState:()=>e.store.getState(),dispatch:t=>e.store.dispatch(t)}),Je="Sites",Ve=()=>{};function ze(e){const t=(0,j.lQ)(e.pathname);let s=e.pathname;t&&(s=(0,j.n3)(e.pathname));let i="/home"===s?"/sites":s;return(0,R.Z)()&&s.startsWith("/plugins")&&(i="/plugins"),(0,b.tZ)(_e,{path:e.path,allSitesPath:i,siteBasePath:s})}function Ke(e){const{getState:t}=Xe(e),s=t(),i=(0,v.ts)(s),n=i&&i.site_count-i.visible_site_count;(0,h.QS)({group:"sites"})(e),e.primary=(0,d.createElement)(p.Z,{title:o.ZP.translate("You have %(hidden)d hidden WordPress site.","You have %(hidden)d hidden WordPress sites.",{count:n,args:{hidden:n}}),line:o.ZP.translate("To manage it here, set it to visible.","To manage them here, set them to visible.",{count:n}),action:o.ZP.translate("Change Visibility"),actionURL:"//dashboard.wordpress.com/wp-admin/index.php?page=my-blogs",secondaryAction:o.ZP.translate("Create New Site"),secondaryActionURL:`${(0,E.Nf)()}?ref=calypso-nosites`,className:"no-visible-sites-message"}),(0,h.wx)(e,Ve),(0,h.sY)(e)}function Qe(e,t,s,i){const n=[W.q6,W.Y9,W.lq,W.wt,W.OL,W.En,W.Hf,W.tZ,W.Jk,W.G$,W.Iv,M.Fb,M.m3,M.s_,M.yV,M.IR,M.x9,M.Vp,M.Y,M.y0,M.GZ];let o=n.map((e=>e===M.m3?(0,M.m3)(t,t,i.productType):e(t,t)));o=o.concat(n.map((e=>e(t,t,(0,W.eZ)())))),s&&t!==s.name&&(o=o.concat(n.map((e=>e(t,s.name)))));const c=["/checkout/",`/me/purchases/${t}`,`/purchases/add-payment-method/${t}`,`/purchases/billing-history/${t}`,`/purchases/payment-methods/${t}`,`/purchases/subscriptions/${t}`];return!!(0,a.Z)(c,(t=>(0,r.Z)(e,t)))||o.indexOf(e)>-1}function Ge(e){const t=e.store.getState(),s=(0,Ye.Z)(t);if((0,Ae.Z)(t,s.ID)&&!(0,r.Z)(e.pathname,"/migrate/"))return l().redirect(`/migrate/${s.slug}`),!1;const i=(0,Q.Z)(t,s.ID);if((0,Re.Z)(t,s.ID)&&!Qe(e.pathname,s.slug,i,e.params))return function(e,t){e.primary=(0,b.BX)(b.HY,{children:[(0,b.tZ)(T.Z,{path:"/view/:site",title:"Domain Only"}),(0,b.tZ)(U.Z,{siteId:t.ID,hasNotice:!1})]}),e.secondary=ze(e),(0,h.wx)(e,Ve),(0,h.sY)(e)}(e,s),!1;const n=(0,qe.eT)(t,s.ID);return!function(e,t){if(!t)return null;const s=(0,G.Z)(e,t);return s?s.options?.is_difm_lite_in_progress??!1:null}(t,s.ID)||(0,Me.o)(t)||function(e,t,s,i){const n=[(0,W.fY)(),(0,M.Fb)(t)];return s.some((s=>Qe(e,t,s,i)))||n.some((t=>e.startsWith(t)))}(e.pathname,s.slug,n,e.params)?(et(e),!0):(function(e,t){e.primary=(0,b.tZ)(se,{siteId:t.ID}),e.secondary=ze(e),(0,h.wx)(e,Ve),(0,h.sY)(e)}(e,s),!1)}function et(e){const t=e.store.getState();if((0,Te.V2)(t)){const s=(0,He.Z)(t),i=(0,Te.Oz)(t,"recentSites");if(s&&s!==i[0]){const n=[...new Set([s,...i])].slice(0,5).filter((e=>!!(0,Ue.Z)(t,e)));e.store.dispatch((0,De.zZ)("recentSites",n))}}}function tt(e,t){const{username:s,primary_blog:i,primary_blog_url:n,primary_blog_is_jetpack:a}=e,r={username:s,primary_blog:i,primary_blog_url:n,primary_blog_is_jetpack:a};e.primary_blog_is_jetpack?(t((0,Oe.PU)(o.ZP.translate("Please check your Primary Site's Jetpack connection"),{button:"wp-admin",href:`${e.primary_blog_url}/wp-admin`})),(0,F.recordTracksEvent)("calypso_mysites_single_site_jetpack_connection_error",r)):(t((0,Oe.tF)((0,R.Z)()?o.ZP.translate("Your Primary site is not a Jetpack site."):o.ZP.translate("Please set a Primary site."),{button:o.ZP.translate("Account Settings"),href:"https://wordpress.com/me/account"})),(0,F.recordTracksEvent)("calypso_mysites_single_site_error",r))}function st(e,t){const{getState:s}=Xe(e),i=(0,v.ts)(s()),n=i&&i.visible_site_count>=1,o="1"===e.query?.isDomainOnly,a=e.pathname.includes("/checkout/jetpack"),r=e.pathname.includes("/gift/");if(o||a||r||!n)return e.store.dispatch((0,N.B)(null)),t();it(e,t)}function it(e,t){if((0,R.Z)())return void D(e,t);const{getState:s,dispatch:i}=Xe(e),o=e.params.site||(0,j.lQ)(e.path),a=(0,v.ts)(s()),r=a&&1===a.visible_site_count;if(a&&0===a.site_count)return function(e){(0,h.QS)({group:"sites"})(e),e.primary=(0,d.createElement)(u.Z),(0,h.wx)(e,Ve),(0,h.sY)(e)}(e),void ot(e,o);if(a&&0===a.visible_site_count)return Ke(e),void function(e,t){ot(e,t,"All Sites Hidden")}(e,o);if(r&&!o){const t=(0,k.Z)(s()),n=(0,I.Z)(s(),t);return void(n?at(e,n):i((0,w.LV)(t)).catch((()=>null)).then((()=>{const n=(0,I.Z)(s(),t);n?at(e,n):tt(a,i)})))}const c=typeof o;if(("string"!==c||!o.length)&&"number"!==c)return i((0,N._)()),t();const p=(0,P.Z)(s(),o),m="1"===e.query?.unlinked&&e.pathname.match(/^\/checkout\/[^/]+\/jetpack_/i)&&!e.pathname.includes("jetpack_boost");p&&!m?(i((0,N.B)(p)),Ge(e)&&t()):i((0,w.LV)(o)).catch((()=>null)).then((a=>{if(a&&a.ID){const t=(0,I.Z)(s(),a.ID),i=(0,q.ce)((0,We.Z)(s(),a.ID,"unmapped_url"));if(i!==t&&i===o)return l().redirect(e.path.replace(o,t))}let r=(0,P.Z)(s(),o);if(!r){const e=o.replace(/\b.wordpress.com/,".wpcomstaging.com");r=(0,P.Z)(s(),e)}if(r&&!m)i((0,N.B)(r)),Ge(e)&&t();else if(function(e,t){return"1"===e.query?.unlinked&&!!t?.URL}(e,a))(0,A.c)(function(e,t){return(0,x.Z)({page:"jetpack",action:"authorize_redirect",dest_url:(0,n.I)(window.origin+e.path,"unlinked")},(0,$.Z)(t?.URL)+"wp-admin/")}(e,a));else{const t=e.path.indexOf(`/${o}`),s=(0,x.Z)({site:o},e.path.substring(0,t));l().redirect(s)}}))}function nt(e,t){(0,v.Pc)(e.store.getState())?it(e,t):t()}function ot(e,t,s){(0,S.A)("/no-sites",`Sites > ${s||"No Sites"}`,{base_path:(0,j.n3)(e.path,t)})}function at(e,t){let s=`${e.pathname.split("/no-site")[0].replace(/\/?$/,"/")}${t}`;e.querystring&&(s+=`?${e.querystring}`),l().redirect(s)}function rt(e,t){e.secondary=ze(e),t()}function ct(e,t){"1"===e.query.verified&&e.store.dispatch((0,Oe.RT)(o.ZP.translate("Email verified! Now that you've confirmed your email address you can publish posts on your blog."))),e.store.dispatch((0,ue.Js)("content")),(0,h.QS)({group:"sites"})(e),e.primary=function(e){const t=(0,j.n3)(e.path);let s=t.split("/no-site")[0];e.querystring&&(s=`${s}?${e.querystring}`);let i="/sites"===s?"/home":s;return(0,R.Z)()&&i.startsWith("/plugins")&&(i="/plugins/manage"),(0,S.A)(t,Je),(0,b.tZ)(Be,{siteBasePath:i,getSiteSelectionHeaderText:e.getSiteSelectionHeaderText,fromSite:e.query.site,clearPageTitle:e.clearPageTitle})}(e),t()}function lt(e){return(t,s)=>{const i=t.store.getState();return(0,He.Z)(i)?s():l().redirect(e)}}function dt(e,t){const s=e.store,n=(0,Ye.Z)(s.getState());if(!i.ZP.isEnabled("p2/p2-plus")&&n&&(0,$e.Z)(s.getState(),n.ID)){const e=(0,I.Z)(s.getState(),n.ID);return l().redirect(`/home/${e}`)}t()}function pt(e,t){const s=e.store,n=(0,Ye.Z)(s.getState());if(i.ZP.isEnabled("p2/p2-plus")&&n&&(0,$e.Z)(s.getState(),n.ID)&&!(0,Ee.Z)(s.getState(),n.ID)){const e=(0,Fe.Z)(s.getState(),n.ID),t=(0,I.Z)(s.getState(),e);if(t)return l().redirect(`/plans/my-plan/${t}`)}t()}function ut(e,t){const s=e.store,i=(0,Ye.Z)(s.getState());if(i&&(0,$e.Z)(s.getState(),i.ID)){const e=(0,I.Z)(s.getState(),i.ID);return l().redirect(`/home/${e}`)}t()}function ht(e,t){const s=e.store.getState();(0,v.Pc)(s)?(0,m.D9)(it,ct,h.wx,g.s)(e):t()}},"./my-sites/domains/domain-management/list/domain-only.jsx":(e,t,s)=>{s.d(t,{Z:()=>f});var i=s("../packages/components/src/button/index.tsx"),n=s("../packages/i18n-calypso/src/localize.js"),o=s("../node_modules/react-redux/es/index.js"),a=s("./assets/images/domains/domain.svg"),r=s("./components/data/query-site-domains/index.jsx"),c=s("./components/empty-content/index.jsx");var l=s("./lib/gsuite/has-gsuite-with-us.ts"),d=s("./lib/titan/index.js"),p=s("./my-sites/domains/paths.js"),u=s("./my-sites/email/paths.js"),h=s("./state/analytics/actions/record.js"),m=s("./state/selectors/get-primary-domain-by-site-id.js"),g=s("./state/sites/selectors/get-site-slug.js"),y=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const f=(0,o.$j)(((e,t)=>({slug:(0,g.Z)(e,t.siteId),primaryDomain:(0,m.Z)(e,t.siteId)})),{recordTracks:h.jN})((0,n.Z)((({primaryDomain:e,hasNotice:t,recordTracks:s,siteId:n,slug:o,translate:h})=>{if(!e)return(0,y.BX)("div",{children:[(0,y.tZ)(r.Z,{siteId:n}),(0,y.tZ)(c.Z,{className:"domain-only-site__placeholder",illustration:a})]});const m=(0,l.u)(e)||(0,d.zW)(e),g=e.name,f=function(e){return!!e?.currentUserCanCreateSiteFromDomainOnly}(e),Z=(0,p.j$)(o,n);return(0,y.BX)("div",{children:[(0,y.tZ)(c.Z,{title:h("%(domainName)s is ready when you are.",{args:{domainName:g}}),line:f&&h("Start a site now to unlock everything WordPress.com can offer."),action:f&&h("Create site"),actionURL:f&&Z,secondaryAction:h("Manage domain"),secondaryActionURL:(0,p.OL)(o,g),illustration:a,children:(0,y.tZ)(i.Z,{className:"empty-content__action button",href:(0,u.Fb)(o,g),onClick:()=>{s(m?"calypso_domain_only_email_manage":"calypso_domain_only_email_cta",{domain:g})},children:h(m?"Manage email":"Add email")})}),t&&(0,y.tZ)("div",{className:"domain-only-site__settings-notice",children:h("Your domain should start working immediately, but may be unreliable during the first 30 minutes.")})]})})))},"./state/selectors/get-primary-domain-by-site-id.js":(e,t,s)=>{s.d(t,{Z:()=>n});var i=s("./state/sites/domains/selectors.js");function n(e,t){const s=(0,i.eT)(e,t);return 0===s.length?null:s.filter((e=>e.isPrimary))[0]}},"./state/sites/selectors/get-site-id.js":(e,t,s)=>{s.d(t,{Z:()=>n});var i=s("./state/sites/selectors/get-site.js");function n(e,t){if(!t)return null;const s=(0,i.Z)(e,t);return s?s.ID:null}},"./state/ui/actions/set-sites.js":(e,t,s)=>{s.d(t,{B:()=>n,_:()=>o});var i=s("./state/action-types.ts");s("./state/ui/init.js");function n(e){return{type:i.bgv,siteId:e}}function o(){return{type:i.bgv,siteId:null}}},"../packages/calypso-products/src/constants/titan.ts":(e,t,s)=>{s.d(t,{A$:()=>i,M7:()=>n,xB:()=>o});const i="wp_titan_mail_monthly",n="wp_titan_mail_yearly",o=[i,n]},"../packages/components/src/card/index.tsx":(e,t,s)=>{s.d(t,{Z:()=>d});var i=s("../node_modules/classnames/index.js"),n=s.n(i),o=s("../node_modules/react/index.js"),a=s("../packages/components/src/gridicon/index.tsx"),r=(s("../packages/components/src/card/style.scss"),s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"));const c=({children:e,className:t,compact:s,displayAsLink:i,highlight:c,tagName:l="div",href:d,target:p,...u},h)=>{const m=n()("card",t,{"is-card-link":i||d,"is-clickable":u.onClick,"is-compact":s,"is-highlight":c},!!c&&"is-"+c);return d?(0,r.BX)("a",{...u,href:d,target:p,className:m,ref:h,children:[(0,r.tZ)(a.Z,{className:"card__link-indicator",icon:p?"external":"chevron-right"}),e]}):(0,o.createElement)(l,{...u,className:m,ref:h},i&&(0,r.tZ)(a.Z,{className:"card__link-indicator",icon:p?"external":"chevron-right"}),e)},l=(0,o.forwardRef)(c);l.displayName="Card";const d=(0,o.memo)(l)},"./assets/images/difm/site-build-in-progress.svg":e=>{e.exports="/calypso/images/../images/site-build-in-progress-9b47a2a89d806fce3e9d.svg"},"./assets/images/difm/website-content-required.svg":e=>{e.exports="/calypso/images/../images/website-content-required-793fb3aff81d58c467f7.svg"},"./assets/images/domains/domain.svg":e=>{e.exports="/calypso/images/../images/domain-130afdfc6b88665edb90.svg"}}]);